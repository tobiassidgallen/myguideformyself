<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Arch Linux Installation Guide</title>
    <link href="style.css" rel="stylesheet" type="text/css" />
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
</head>
<body>
    <header>
        <div class="container">
            <h1><i class="fab fa-linux"></i> Arch Linux Installation Guide</h1>
            <p>Complete step-by-step installation and configuration guide</p>
        </div>
    </header>

    <nav class="sidebar">
        <ul>
            <li><a href="#initial-setup">Initial Setup</a></li>
            <li><a href="#base-install">Base Installation</a></li>
            <li><a href="#post-install">Post Installation</a></li>
            <li><a href="#system-config">System Configuration</a></li>
            <li><a href="#performance">Performance Optimization</a></li>
            <li><a href="#desktop-environment">Desktop Environment</a></li>
            <li><a href="#rice-setup">Rice Configuration</a></li>
            <li><a href="#final-steps">Final Steps</a></li>
            <li><a href="#network-management">Network Management</a></li>
            <li><a href="#bluetooth">Bluetooth</a></li>
            <li><a href="#glossary">Glossary</a></li>
        </ul>
    </nav>

    <main class="content">
        <section id="initial-setup" class="section">
            <h2><i class="fas fa-play-circle"></i> Initial Setup</h2>
            
            <div class="command-block">
                <h3>Set Font and Keyboard Layout</h3>
                <div class="code-container">
                    <code>setfont ter-132b && loadkeys us</code>
                    <button class="copy-btn" onclick="copyToClipboard(this)">
                        <i class="fas fa-copy"></i>
                    </button>
                </div>
            </div>

            <div class="command-block">
                <h3>Connect to WiFi</h3>
                <div class="code-container">
                    <code>iwctl
device list
station wlan0 scan
station wlan0 get-networks
station wlan0 connect "YOUR_NETWORK_NAME"
exit</code>
                    <button class="copy-btn" onclick="copyToClipboard(this)">
                        <i class="fas fa-copy"></i>
                    </button>
                </div>
            </div>

            <div class="command-block">
                <h3>Test Internet Connection</h3>
                <div class="code-container">
                    <code>ping -c 3 archlinux.org || { echo "No internet"; exit 1; }</code>
                    <button class="copy-btn" onclick="copyToClipboard(this)">
                        <i class="fas fa-copy"></i>
                    </button>
                </div>
            </div>

            <div class="command-block">
                <h3>Set System Clock</h3>
                <div class="code-container">
                    <code>timedatectl set-ntp true</code>
                    <button class="copy-btn" onclick="copyToClipboard(this)">
                        <i class="fas fa-copy"></i>
                    </button>
                </div>
            </div>
        </section>

        <section id="partitioning" class="section">
            <h2><i class="fas fa-hdd"></i> Disk Partitioning</h2>
            
            <div class="command-block">
                <h3>List Block Devices</h3>
                <div class="code-container">
                    <code>lsblk</code>
                    <button class="copy-btn" onclick="copyToClipboard(this)">
                        <i class="fas fa-copy"></i>
                    </button>
                </div>
            </div>

            <div class="command-block">
                <h3>Partition Disk</h3>
                <div class="code-container">
                    <code>cfdisk /dev/nvme0n1</code>
                    <button class="copy-btn" onclick="copyToClipboard(this)">
                        <i class="fas fa-copy"></i>
                    </button>
                </div>
            </div>

            <div class="command-block">
                <h3>Format Partitions</h3>
                <div class="code-container">
                    <code>mkfs.ext4 /dev/nvme0n1p3
mkfs.fat -F 32 /dev/nvme0n1p1
mkswap /dev/nvme0n1p2</code>
                    <button class="copy-btn" onclick="copyToClipboard(this)">
                        <i class="fas fa-copy"></i>
                    </button>
                </div>
            </div>

            <div class="command-block">
                <h3>Mount Partitions</h3>
                <div class="code-container">
                    <code>mount /dev/nvme0n1p3 /mnt
mkdir -p /mnt/boot/efi
mount /dev/nvme0n1p1 /mnt/boot/efi
swapon /dev/nvme0n1p2</code>
                    <button class="copy-btn" onclick="copyToClipboard(this)">
                        <i class="fas fa-copy"></i>
                    </button>
                </div>
            </div>
        </section>

        <section id="base-install" class="section">
            <h2><i class="fas fa-download"></i> Base Installation</h2>
            
            <div class="command-block">
                <h3>Install Base System</h3>
                <div class="code-container">
                    <code>pacstrap /mnt base linux linux-firmware amd-ucode sof-firmware base-devel grub efibootmgr networkmanager sudo git neovim</code>
                    <button class="copy-btn" onclick="copyToClipboard(this)">
                        <i class="fas fa-copy"></i>
                    </button>
                </div>
            </div>

            <div class="command-block">
                <h3>Generate fstab</h3>
                <div class="code-container">
                    <code>genfstab /mnt
genfstab -U /mnt >> /mnt/etc/fstab</code>
                    <button class="copy-btn" onclick="copyToClipboard(this)">
                        <i class="fas fa-copy"></i>
                    </button>
                </div>
            </div>

            <div class="command-block">
                <h3>Chroot into System</h3>
                <div class="code-container">
                    <code>arch-chroot /mnt</code>
                    <button class="copy-btn" onclick="copyToClipboard(this)">
                        <i class="fas fa-copy"></i>
                    </button>
                </div>
            </div>
        </section>

        <section id="system-config" class="section">
            <h2><i class="fas fa-cog"></i> System Configuration</h2>
            
            <div class="command-block">
                <h3>Set Timezone</h3>
                <div class="code-container">
                    <code>date
ln -sf /usr/share/zoneinfo/Asia/Manila /etc/localtime
hwclock --systohc
date</code>
                    <button class="copy-btn" onclick="copyToClipboard(this)">
                        <i class="fas fa-copy"></i>
                    </button>
                </div>
            </div>

            <div class="command-block">
                <h3>Set Locale</h3>
                <div class="code-container">
                    <code>echo 'en_US.UTF-8 UTF-8' >> /etc/locale.gen
locale-gen
echo 'LANG=en_US.UTF-8' > /etc/locale.conf
echo 'KEYMAP=us' > /etc/vconsole.conf</code>
                    <button class="copy-btn" onclick="copyToClipboard(this)">
                        <i class="fas fa-copy"></i>
                    </button>
                </div>
            </div>

            <div class="command-block">
                <h3>Set Hostname and Users</h3>
                <div class="code-container">
                    <code>echo 'tobias' > /etc/hostname
passwd
useradd -m -G wheel -s /bin/bash sid
passwd sid</code>
                    <button class="copy-btn" onclick="copyToClipboard(this)">
                        <i class="fas fa-copy"></i>
                    </button>
                </div>
            </div>

            <div class="command-block">
                <h3>Configure sudo</h3>
                <div class="code-container">
                    <code>echo '%wheel ALL=(ALL:ALL) ALL' >> /etc/sudoers</code>
                    <button class="copy-btn" onclick="copyToClipboard(this)">
                        <i class="fas fa-copy"></i>
                    </button>
                </div>
            </div>

            <div class="command-block">
                <h3>Install and Configure Bootloader</h3>
                <div class="code-container">
                    <code>systemctl enable NetworkManager
grub-install --target=x86_64-efi --efi-directory=/boot/efi --bootloader-id=GRUB
grub-mkconfig -o /boot/grub/grub.cfg</code>
                    <button class="copy-btn" onclick="copyToClipboard(this)">
                        <i class="fas fa-copy"></i>
                    </button>
                </div>
            </div>

            <div class="command-block">
                <h3>Exit and Reboot</h3>
                <div class="code-container">
                    <code>exit
umount -R /mnt
reboot</code>
                    <button class="copy-btn" onclick="copyToClipboard(this)">
                        <i class="fas fa-copy"></i>
                    </button>
                </div>
            </div>
        </section>

        <section id="post-install" class="section">
            <h2><i class="fas fa-rocket"></i> Post Installation</h2>
            
            <div class="command-block">
                <h3>Connect to WiFi</h3>
                <div class="code-container">
                    <code>nmcli device wifi connect "YOUR_NETWORK_NAME" password "YOUR_PASSWORD"</code>
                    <button class="copy-btn" onclick="copyToClipboard(this)">
                        <i class="fas fa-copy"></i>
                    </button>
                </div>
            </div>

            <div class="command-block">
                <h3>Update System</h3>
                <div class="code-container">
                    <code>sudo pacman -Syu</code>
                    <button class="copy-btn" onclick="copyToClipboard(this)">
                        <i class="fas fa-copy"></i>
                    </button>
                </div>
            </div>

            <div class="command-block">
                <h3>Install Desktop Environment</h3>
                <div class="code-container">
                    <code>sudo pacman -S xorg-server xorg-xinit i3-wm i3status i3lock rofi alacritty firefox</code>
                    <button class="copy-btn" onclick="copyToClipboard(this)">
                        <i class="fas fa-copy"></i>
                    </button>
                </div>
            </div>

            <div class="command-block">
                <h3>Configure X11</h3>
                <div class="code-container">
                    <code>echo 'exec i3' > ~/.xinitrc</code>
                    <button class="copy-btn" onclick="copyToClipboard(this)">
                        <i class="fas fa-copy"></i>
                    </button>
                </div>
            </div>

            <div class="command-block">
                <h3>Start Desktop</h3>
                <div class="code-container">
                    <code>startx</code>
                    <button class="copy-btn" onclick="copyToClipboard(this)">
                        <i class="fas fa-copy"></i>
                    </button>
                </div>
            </div>
        </section>

        <section id="package-install" class="section">
            <h2><i class="fas fa-box"></i> Essential Packages Installation</h2>
            
            <div class="command-block">
                <h3>Install AUR Helper and Essential Packages</h3>
                <div class="code-container">
                    <code>sudo sed -i '/^#\[multilib\]/,/^#Include = \/etc\/pacman\.d\/mirrorlist/ s/^#//' /etc/pacman.conf && \
sudo pacman -Syu && \
git clone https://aur.archlinux.org/yay.git && \
cd yay && \
makepkg -si --noconfirm --needed && \
cd .. && \
rm -rf yay && \
sudo pacman -S --noconfirm man-db man-pages reflector tmux thunar papirus-icon-theme thunar-archive-plugin xarchiver p7zip unzip tar ntfs-3g exfatprogs gvfs gvfs-mtp gvfs-gphoto2 gvfs-smb udisks2 udiskie libmtp gparted picom feh maim xclip xorg-xrandr fastfetch btop lm_sensors acpi powertop tlp tlp-rdw dmidecode brightnessctl pipewire pipewire-pulse pipewire-alsa wireplumber alsa-utils alsa-ucm-conf bluez bluez-utils libinput xf86-input-libinput xorg-xinput xdotool v4l-utils cheese wget curl rsync fzf dunst libnotify mpv ufw mesa lib32-mesa vulkan-radeon lib32-vulkan-radeon xf86-video-amdgpu mesa-vdpau libva-mesa-driver noto-fonts-emoji noto-fonts noto-fonts-cjk && \
yay -S --noconfirm ttf-jetbrains-mono-nerd spotify || echo "Some AUR packages failed"</code>
                    <button class="copy-btn" onclick="copyToClipboard(this)">
                        <i class="fas fa-copy"></i>
                    </button>
                </div>
            </div>
        </section>

        <section id="system-optimization" class="section">
            <h2><i class="fas fa-tachometer-alt"></i> System Optimization</h2>
            
            <div class="command-block">
                <h3>Configure System Services and Security</h3>
                <div class="code-container">
                    <code>sudo usermod -aG audio,video,input,storage,power,rfkill,sys,adm,disk sid && \
sudo reflector --country Philippines,Singapore,South_Korea,Japan --age 12 --protocol https --sort rate --latest 10 --save /etc/pacman.d/mirrorlist && \
sudo systemctl enable --now reflector.timer && \
sudo pacman -Syyu && \
sudo modprobe ip_tables && \
sudo modprobe ip6_tables && \
sudo systemctl enable ufw && \
sudo ufw default deny incoming && \
sudo ufw default allow outgoing && \
sudo ufw --force enable && \
sudo sensors-detect --auto && \
sudo sed -i 's/#AutoEnable=false/AutoEnable=true/' /etc/bluetooth/main.conf && \
systemctl --user daemon-reexec && \
systemctl --user enable --now pipewire.service pipewire-pulse.service wireplumber.service && \
sudo systemctl enable --now bluetooth tlp && \
sudo systemctl mask systemd-networkd-wait-online.service && \
sudo sed -i 's/^#DefaultTimeoutStopSec=.*$/DefaultTimeoutStopSec=10s/' /etc/systemd/system.conf && \
sudo sed -i 's/^#DefaultTimeoutStartSec=.*$/DefaultTimeoutStartSec=5s/' /etc/systemd/system.conf && \
sudo systemctl enable fstrim.timer && \
sudo systemctl start fstrim.timer && \
sudo systemctl daemon-reexec</code>
                    <button class="copy-btn" onclick="copyToClipboard(this)">
                        <i class="fas fa-copy"></i>
                    </button>
                </div>
            </div>
        </section>

        <section id="performance" class="section">
            <h2><i class="fas fa-bolt"></i> Performance Optimization</h2>
            
            <div class="command-block">
                <h3>GRUB and Hardware Optimization</h3>
                <div class="code-container">
                    <code>sudo sed -i 's/GRUB_CMDLINE_LINUX=""/GRUB_CMDLINE_LINUX="quiet splash mitigations=off nowatchdog processor.max_cstate=1 amd_pstate=active"/' /etc/default/grub && \
sudo grub-mkconfig -o /boot/grub/grub.cfg && \
echo 'ACTION=="add|change", KERNEL=="nvme[0-9]*", ATTR{queue/scheduler}="mq-deadline"' | sudo tee /etc/udev/rules.d/60-ioschedulers.rules && \
brightnessctl set 50% && \
sudo mkdir -p /etc/X11/xorg.conf.d && \
sudo tee /etc/X11/xorg.conf.d/30-touchpad.conf > /dev/null <<'EOF'
Section "InputClass"
    Identifier "touchpad"
    Driver "libinput"
    MatchIsTouchpad "on"
    Option "Tapping" "on"
    Option "TappingButtonMap" "lrm"
    Option "NaturalScrolling" "true"
    Option "ScrollMethod" "twofinger"
    Option "ClickMethod" "clickfinger"
    Option "DisableWhileTyping" "on"
EndSection
EOF</code>
                    <button class="copy-btn" onclick="copyToClipboard(this)">
                        <i class="fas fa-copy"></i>
                    </button>
                </div>
            </div>
        </section>

        <section id="custom-scripts" class="section">
            <h2><i class="fas fa-terminal"></i> Custom System Scripts</h2>
            
            <div class="command-block">
                <h3>Create System Management Scripts</h3>
                <div class="code-container">
                    <code>sudo tee /usr/local/bin/update > /dev/null <<'EOF'
#!/bin/bash
echo "=== UPDATING SYSTEM ==="
sudo pacman -Syu --noconfirm
echo "=== UPDATING AUR PACKAGES ==="
yay -Syu --noconfirm
echo "=== UPDATE COMPLETE ==="
EOF
sudo chmod +x /usr/local/bin/update && \
sudo tee /usr/local/bin/debloat > /dev/null <<'EOF'
#!/bin/bash
echo "=== DISK SPACE BEFORE ==="
df -h / | tail -1
echo "=== CLEANING PACKAGE CACHE ==="
sudo pacman -Sc --noconfirm
yay -Sc --noconfirm
echo "=== REMOVING ORPHANED PACKAGES ==="
sudo pacman -Rns $(pacman -Qtdq) --noconfirm 2>/dev/null || echo "No orphaned packages"
echo "=== CLEARING SYSTEM LOGS ==="
sudo journalctl --vacuum-time=3d
echo "=== CLEARING USER CACHE ==="
rm -rf ~/.cache/* 2>/dev/null || true
echo "=== CLEARING TEMP FILES ==="
sudo rm -rf /tmp/* /var/tmp/* 2>/dev/null || true
echo "=== CLEARING THUMBNAILS ==="
rm -rf ~/.thumbnails/* ~/.local/share/Trash/* 2>/dev/null || true
echo "=== CLEARING FIREFOX CACHE ==="
rm -rf ~/.mozilla/firefox/*/storage/default/cache2/* 2>/dev/null || true
echo "=== MEMORY CLEANUP ==="
sync && echo 3 | sudo tee /proc/sys/vm/drop_caches
echo "=== DEBLOAT COMPLETE ==="
df -h / | tail -1
EOF
sudo chmod +x /usr/local/bin/debloat && \
sudo tee /usr/local/bin/performance > /dev/null <<'EOF'
#!/bin/bash
echo "=== ENABLING PERFORMANCE MODE ==="
echo performance | sudo tee /sys/devices/system/cpu/cpu*/cpufreq/scaling_governor
echo "=== SETTING VM SWAPPINESS ==="
echo 'vm.swappiness=10' | sudo tee -a /etc/sysctl.d/99-swappiness.conf
echo "=== OPTIMIZING I/O SCHEDULER ==="
echo mq-deadline | sudo tee /sys/block/nvme0n1/queue/scheduler
echo "=== PERFORMANCE MODE ACTIVE ==="
cat /sys/devices/system/cpu/cpu0/cpufreq/scaling_governor
EOF
sudo chmod +x /usr/local/bin/performance && \
sudo tee /usr/local/bin/powersave > /dev/null <<'EOF'
#!/bin/bash
echo "=== ENABLING POWERSAVE MODE ==="
echo powersave | sudo tee /sys/devices/system/cpu/cpu*/cpufreq/scaling_governor
echo "=== ENABLING WIFI POWERSAVE ==="
sudo iw dev wlan0 set power_save on 2>/dev/null || echo "Wifi powersave not available"
echo "=== REDUCING BRIGHTNESS ==="
brightnessctl set 30%
echo "=== POWERSAVE MODE ACTIVE ==="
cat /sys/devices/system/cpu/cpu0/cpufreq/scaling_governor
EOF
sudo chmod +x /usr/local/bin/powersave && \
sudo tee /usr/local/bin/boost > /dev/null <<'EOF'
#!/bin/bash
echo "=== TEMPORARY PERFORMANCE BOOST ==="
echo performance | sudo tee /sys/devices/system/cpu/cpu*/cpufreq/scaling_governor
echo never | sudo tee /sys/kernel/mm/transparent_hugepage/enabled
echo 1 | sudo tee /proc/sys/vm/drop_caches
echo "=== BOOST ACTIVE FOR THIS SESSION ==="
EOF
sudo chmod +x /usr/local/bin/boost && \
sudo tee /usr/local/bin/boottime > /dev/null <<'EOF'
#!/bin/bash
echo "=== BOOT TIME ANALYSIS ==="
systemd-analyze
echo ""
echo "=== SLOWEST SERVICES ==="
systemd-analyze blame | head -10
echo ""
echo "=== CRITICAL CHAIN ==="
systemd-analyze critical-chain
EOF
sudo chmod +x /usr/local/bin/boottime</code>
                    <button class="copy-btn" onclick="copyToClipboard(this)">
                        <i class="fas fa-copy"></i>
                    </button>
                </div>
            </div>
        </section>

        <section id="advanced-performance" class="section">
            <h2><i class="fas fa-microchip"></i> Advanced Performance Configuration</h2>
            
            <div class="command-block">
                <h3>System Performance Tweaks</h3>
                <div class="code-container">
                    <code>sudo tee /etc/sysctl.d/99-performance.conf > /dev/null <<'EOF'
# Performance optimizations and Advanced I/O optimizations
vm.swappiness=10
vm.vfs_cache_pressure=50
vm.dirty_ratio=15
vm.dirty_background_ratio=5
kernel.sched_migration_cost_ns=5000000
kernel.sched_autogroup_enabled=0
vm.dirty_expire_centisecs = 1500
vm.dirty_writeback_centisecs = 1500
vm.page-cluster = 0
kernel.sched_rt_runtime_us = 950000
kernel.sched_rt_period_us = 1000000
EOF
sudo tee /etc/systemd/system/cpu-performance.service > /dev/null <<'EOF'
[Unit]
Description=Set CPU Performance Governor
After=multi-user.target

[Service]
Type=oneshot
ExecStart=/bin/bash -c 'echo performance | tee /sys/devices/system/cpu/cpu*/cpufreq/scaling_governor'
RemainAfterExit=yes

[Install]
WantedBy=multi-user.target
EOF
sudo systemctl enable cpu-performance.service</code>
                    <button class="copy-btn" onclick="copyToClipboard(this)">
                        <i class="fas fa-copy"></i>
                    </button>
                </div>
            </div>
        </section>

        <section id="desktop-environment" class="section">
            <h2><i class="fas fa-desktop"></i> Desktop Environment Setup</h2>
            
            <div class="command-block">
                <h3>Wallpaper Script Setup</h3>
                <div class="code-container">
                    <code>mkdir -p ~/.config/scripts ~/Pictures/wallpapers && \
cat > ~/.config/scripts/wallpaper.sh <<'EOF'
#!/bin/bash
WALLPAPER_DIR="$HOME/Pictures/wallpapers"

if [ ! -d "$WALLPAPER_DIR" ]; then
    echo "Wallpaper directory not found: $WALLPAPER_DIR"
    mkdir -p "$WALLPAPER_DIR"
    echo "Please add wallpapers to $WALLPAPER_DIR"
    exit 1
fi

WALLPAPERS=($(find "$WALLPAPER_DIR" -type f \( -iname "*.jpg" -o -iname "*.jpeg" -o -iname "*.png" -o -iname "*.webp" -o -iname "*.bmp" \)))

if [ ${#WALLPAPERS[@]} -eq 0 ]; then
    echo "No wallpapers found in $WALLPAPER_DIR"
    exit 1
fi

RANDOM_WALLPAPER=${WALLPAPERS[$RANDOM % ${#WALLPAPERS[@]}]}
feh --bg-scale "$RANDOM_WALLPAPER"
echo "Wallpaper set to: $(basename "$RANDOM_WALLPAPER")"
EOF
chmod +x ~/.config/scripts/wallpaper.sh</code>
                    <button class="copy-btn" onclick="copyToClipboard(this)">
                        <i class="fas fa-copy"></i>
                    </button>
                </div>
            </div>
        </section>

        <section id="i3-config" class="section">
            <h2><i class="fas fa-window-maximize"></i> i3 Configuration</h2>
            
            <div class="command-block">
                <h3>Configure i3 Window Manager</h3>
                <div class="code-container">
                    <code>mkdir -p ~/.config/alacritty && \
cat > ~/.xinitrc <<'EOF'
~/.config/scripts/wallpaper.sh auto &
exec i3
EOF
{
echo "exec --no-startup-id ~/.config/scripts/wallpaper.sh auto"
echo "bindsym \$mod+Shift+w exec ~/.config/scripts/wallpaper.sh random"
echo 'bindsym Print exec maim | xclip -selection clipboard -t image/png'
echo 'bindsym Shift+Print exec maim -s | xclip -selection clipboard -t image/png'
echo 'bindsym XF86MonBrightnessUp exec brightnessctl set +5% && notify-send "Brightness: $(brightnessctl get)"'
echo 'bindsym XF86MonBrightnessDown exec brightnessctl set 5%- && notify-send "Brightness: $(brightnessctl get)"'
echo 'bindsym $mod+b exec firefox'
echo 'bindsym $mod+t exec thunar'
echo 'bindsym $mod+m exec spotify'
echo 'bindsym $mod+n exec --no-startup-id "i3-msg workspace 5; alacritty -e nvim"'
echo 'assign [class="Spotify"] 10'
echo 'bindsym $mod+p exec alacritty -e btop'
echo 'bindsym $mod+Tab workspace next'
echo 'bindsym $mod+Shift+Tab workspace prev'
echo 'bindsym $mod+x exec i3lock -c 2e3440'
} >> ~/.config/i3/config && \
sed -i 's/font pango:monospace 8/font pango:JetBrains Mono Nerd Font 12/' ~/.config/i3/config && \
echo '[font]
normal = { family = "JetBrains Mono Nerd Font" }
size = 12' > ~/.config/alacritty/alacritty.toml</code>
                    <button class="copy-btn" onclick="copyToClipboard(this)">
                        <i class="fas fa-copy"></i>
                    </button>
                </div>
            </div>
        </section>

        <section id="i3status" class="section">
            <h2><i class="fas fa-chart-bar"></i> i3status Configuration</h2>
            
            <div class="command-block">
                <h3>Configure Status Bar</h3>
                <div class="code-container">
                    <code>mkdir -p ~/.config/i3status && \
cat > ~/.config/i3status/config <<'EOF'
general {
    colors = true
    interval = 2
    color_good = "#a3be8c"
    color_bad = "#bf616a"
    color_degraded = "#ebcb8b"
}

order += "wireless _first_"
order += "ethernet _first_"
order += "memory"
order += "cpu_usage"
order += "cpu_temperature 0"
order += "disk /"
order += "battery all"
order += "volume master"
order += "tztime local"

wireless _first_ {
    format_up = "ðŸ“¶ %quality %essid %ip"
    format_down = "ðŸ“¶ down"
    separator = false
    separator_block_width = 1
}

ethernet _first_ {
    format_up = "ðŸŒ %ip (%speed)"
    format_down = "ðŸŒ down"
    separator = false
    separator_block_width = 1
}

memory {
    format = "ðŸ§  %used/%total"
    threshold_degraded = "1G"
    format_degraded = "ðŸ§  < %free"
}

cpu_usage {
    format = "ðŸ’» %usage"
    max_threshold = 75
    degraded_threshold = 25
}

cpu_temperature 0 {
    format = "ðŸŒ¡ï¸ %degreesÂ°C"
    max_threshold = 75
    path = "/sys/devices/virtual/thermal/thermal_zone0/hwmon1/temp1_input"
}

disk "/" {
    format = "ðŸ’¾ %used/%total"
    low_threshold = 10
    threshold_type = percentage_avail
}

battery all {
    format = "%status %percentage %remaining %consumption"
    format_down = "ðŸ”Œ AC"
    last_full_capacity = true
    integer_battery_capacity = true
    status_chr = "ðŸ”Œ"
    status_bat = "ðŸ”‹"
    status_unk = "â“"
    status_full = "âš¡"
    low_threshold = 15
    threshold_type = percentage
}

volume master {
    format = "ðŸ”Š %volume"
    format_muted = "ðŸ”‡ muted"
    device = "pulse"
}

tztime local {
    format = "ðŸ“… %m-%d-%Y ðŸ• %H:%M:%S"
}
EOF

# Update i3 config to use the new i3status config with proper bar configuration
sed -i '/^[[:space:]]*bar[[:space:]]*{/,/^[[:space:]]*}/c\
bar {\
    status_command i3status\
    position top\
    font pango:JetBrains Mono Nerd Font 12\
    separator_symbol "|"\
    colors {\
        background \$nord0\
        statusline \$nord4\
        separator \$nord3\
        # border background text\
        focused_workspace \$nord8 \$nord8 \$nord0\
        inactive_workspace \$nord1 \$nord0 \$nord3\
        active_workspace \$nord3 \$nord1 \$nord4\
        urgent_workspace \$nord11 \$nord11 \$nord6\
        binding_mode \$nord13 \$nord13 \$nord0\
    }\
}' ~/.config/i3/config</code>
                    <button class="copy-btn" onclick="copyToClipboard(this)">
                        <i class="fas fa-copy"></i>
                    </button>
                </div>
            </div>
        </section>

        <section id="dmenu-config" class="section">
            <h2><i class="fas fa-search"></i> rofi Configuration</h2>
            
            <div class="command-block">
                <h3>Enhanced rofi Setup</h3>
                <div class="code-container">
                    <code># Create Rofi config directory and main configuration
mkdir -p ~/.config/rofi && \

cat > ~/.config/rofi/config.rasi <<'EOF'
configuration {
    modi: "run,drun,window,ssh";
    width: 600;
    lines: 15;
    columns: 1;
    font: "JetBrains Mono Nerd Font Medium 11";
    show-icons: true;
    terminal: "alacritty";
    ssh-client: "ssh";
    ssh-command: "{terminal} -e {ssh-client} {host} [-p {port}]";
    run-command: "{cmd}";
    run-list-command: "";
    run-shell-command: "{terminal} -e {cmd}";
    window-command: "wmctrl -i -R {window}";
    window-match-fields: "all";
    icon-theme: "Papirus-Dark";
    drun-match-fields: "name,generic,exec,categories";
    drun-show-actions: false;
    drun-display-format: "{icon} {name}";
    disable-history: false;
    ignored-prefixes: "";
    sort: false;
    sorting-method: "normal";
    case-sensitive: false;
    cycle: true;
    sidebar-mode: false;
    eh: 1;
    auto-select: false;
    parse-hosts: false;
    parse-known-hosts: true;
    combi-modi: "window,run";
    matching: "fuzzy";
    tokenize: true;
    m: "-5";
    line-margin: 2;
    line-padding: 1;
    filter: "";
    separator-style: "dash";
    hide-scrollbar: false;
    fullscreen: false;
    fake-transparency: false;
    dpi: -1;
    threads: 0;
    scrollbar-width: 8;
    scroll-method: 0;
    fake-background: "screenshot";
    window-format: "{w}    {c}   {t}";
    click-to-exit: true;
    show-match: true;
    color-normal: "";
    color-urgent: "";
    color-active: "";
    color-window: "";
    max-history-size: 25;
    combi-hide-mode-prefix: false;
    matching-negate-char: '-';
    pid: "/run/user/1000/rofi.pid";
    display-window: "";
    display-windowcd: "";
    display-run: "";
    display-ssh: "";
    display-drun: "";
    display-combi: "";
    display-keys: "";
}

@theme "nord"
EOF

# Create Nord theme for Rofi
cat > ~/.config/rofi/nord.rasi <<'EOF'
* {
    /* Nord color palette */
    nord0: #2e3440;
    nord1: #3b4252;
    nord2: #434c5e;
    nord3: #4c566a;
    nord4: #d8dee9;
    nord5: #e5e9f0;
    nord6: #eceff4;
    nord7: #8fbcbb;
    nord8: #88c0d0;
    nord9: #81a1c1;
    nord10: #5e81ac;
    nord11: #bf616a;
    nord12: #d08770;
    nord13: #ebcb8b;
    nord14: #a3be8c;
    nord15: #b48ead;

    background-color: @nord0;
    border-color: @nord8;
    text-color: @nord4;
    spacing: 0;
}

window {
    background-color: @nord0;
    border: 2px;
    border-color: @nord8;
    border-radius: 10px;
    padding: 15px;
}

mainbox {
    border: 0;
    padding: 0;
}

message {
    border: 2px 0px 0px;
    border-color: @nord8;
    padding: 1px;
}

textbox {
    text-color: @nord4;
}

listview {
    fixed-height: 0;
    border: 2px 0px 0px;
    border-color: @nord8;
    spacing: 2px;
    scrollbar: false;
    padding: 2px 0px 0px;
}

element {
    border: 0;
    padding: 6px;
    border-radius: 6px;
}

element-text {
    background-color: inherit;
    text-color: inherit;
}

element.normal.normal {
    background-color: @nord0;
    text-color: @nord4;
}

element.normal.urgent {
    background-color: @nord11;
    text-color: @nord6;
}

element.normal.active {
    background-color: @nord14;
    text-color: @nord0;
}

element.selected.normal {
    background-color: @nord8;
    text-color: @nord0;
}

element.selected.urgent {
    background-color: @nord11;
    text-color: @nord6;
}

element.selected.active {
    background-color: @nord14;
    text-color: @nord0;
}

element.alternate.normal {
    background-color: @nord0;
    text-color: @nord4;
}

element.alternate.urgent {
    background-color: @nord11;
    text-color: @nord6;
}

element.alternate.active {
    background-color: @nord14;
    text-color: @nord0;
}

scrollbar {
    width: 4px;
    border: 0;
    handle-color: @nord8;
    handle-width: 8px;
    padding: 0;
}

sidebar {
    border: 2px 0px 0px;
    border-color: @nord8;
}

button {
    spacing: 0;
    text-color: @nord4;
}

button.selected {
    background-color: @nord8;
    text-color: @nord0;
}

inputbar {
    spacing: 0;
    text-color: @nord4;
    padding: 1px;
}

case-indicator {
    spacing: 0;
    text-color: @nord4;
}

entry {
    spacing: 0;
    text-color: @nord4;
    background-color: @nord1;
    border: 1px;
    border-color: @nord3;
    border-radius: 4px;
    padding: 6px;
}

prompt {
    spacing: 0;
    text-color: @nord8;
    margin: 0px 8px 0px 0px;
}

inputbar {
    children: [ prompt,textbox-prompt-colon,entry,case-indicator ];
}

textbox-prompt-colon {
    expand: false;
    str: ":";
    margin: 0px 0.3em 0em 0em;
    text-color: @nord8;
}
EOF

# Create Rofi launcher scripts
cat > ~/.config/scripts/rofi_run.sh <<'EOF'
#!/bin/bash
rofi -show drun -theme nord
EOF
chmod +x ~/.config/scripts/rofi_run.sh && \

# Update i3 config to use styled dmenu (replace existing binding)
sed -i 's|bindsym \$mod+d exec --no-startup-id dmenu_run|bindsym \$mod+d exec ~/.config/scripts/rofi_run.sh|' ~/.config/i3/config && \

cat > ~/.config/scripts/rofi_power.sh <<'EOF'
#!/bin/bash
options="ðŸ”’ Lock\nðŸ”„ Restart\nâ» Shutdown\nðŸšª Logout\nðŸ’¤ Suspend"

chosen=$(echo -e "$options" | rofi -dmenu -i -p "Power" -theme nord)

case "$chosen" in
    "ðŸ”’ Lock") i3lock -c 2e3440 ;;
    "ðŸ”„ Restart") systemctl reboot ;;
    "â» Shutdown") systemctl poweroff ;;
    "ðŸšª Logout") i3-msg exit ;;
    "ðŸ’¤ Suspend") systemctl suspend ;;
esac
EOF
chmod +x ~/.config/scripts/rofi_power.sh && \

# Add power menu keybinding
echo 'bindsym $mod+Shift+p exec ~/.config/scripts/rofi_power.sh' >> ~/.config/i3/config</code>
                    <button class="copy-btn" onclick="copyToClipboard(this)">
                        <i class="fas fa-copy"></i>
                    </button>
                </div>
            </div>
        </section>

        <section id="picom-config" class="section">
            <h2><i class="fas fa-magic"></i> Picom (Compositor) Configuration</h2>
            
            <div class="command-block">
                <h3>Configure Visual Effects</h3>
                <div class="code-container">
                    <code>mkdir -p ~/.config/picom && \
cat > ~/.config/picom/picom.conf <<'EOF'
# Nord themed Picom configuration

# Shadows
shadow = true;
shadow-radius = 14;
shadow-offset-x = -12;
shadow-offset-y = -12;
shadow-opacity = 0.75;
shadow-red = 0.18;
shadow-green = 0.20;
shadow-blue = 0.25;

shadow-exclude = [
  "name = 'Notification'",
  "class_g = 'Conky'",
  "class_g ?= 'Notify-osd'",
  "class_g = 'Cairo-clock'",
  "class_g = 'i3-bar'",
  "_GTK_FRAME_EXTENTS@:c"
];

# Opacity (more transparent for Nord aesthetic)
inactive-opacity = 0.88;
active-opacity = 1.0;
frame-opacity = 1.0;
inactive-opacity-override = false;

opacity-rule = [
  "100:class_g = 'Alacritty' && focused",
  "88:class_g = 'Alacritty' && !focused",
  "96:class_g = 'Thunar' && focused",
  "88:class_g = 'Thunar' && !focused",
  "100:class_g = 'Firefox'",
  "100:class_g = 'Spotify'",
  "100:class_g = 'i3bar'",
  "100:name *= 'i3lock'"
];

# Fading
fading = true;
fade-in-step = 0.06;
fade-out-step = 0.06;
fade-delta = 8;

# Corners (more rounded for modern look)
corner-radius = 12;
rounded-corners-exclude = [
  "window_type = 'dock'",
  "window_type = 'desktop'",
  "class_g = 'i3bar'"
];

# Background blurring (subtle Nord-style blur)
blur-background = true;
blur-method = "dual_kawase";
blur-strength = 6;
blur-background-exclude = [
  "window_type = 'dock'",
  "window_type = 'desktop'",
  "class_g = 'i3bar'",
  "_GTK_FRAME_EXTENTS@:c"
];

# Backend and performance
backend = "glx";
vsync = true;
mark-wmwin-focused = true;
mark-ovredir-focused = true;
detect-rounded-corners = true;
detect-client-opacity = true;
detect-transient = true;
use-damage = true;
log-level = "warn";

wintypes:
{
  tooltip = { fade = true; shadow = true; opacity = 0.90; focus = true; full-shadow = false; };
  dock = { shadow = false; clip-shadow-above = true; }
  dnd = { shadow = false; }
  popup_menu = { opacity = 0.92; }
  dropdown_menu = { opacity = 0.92; }
};
EOF

# Update i3 config to start picom automatically
sed -i '/exec --no-startup-id ~\/.config\/scripts\/wallpaper.sh auto/a exec --no-startup-id picom --config ~/.config/picom/picom.conf' ~/.config/i3/config</code>
                    <button class="copy-btn" onclick="copyToClipboard(this)">
                        <i class="fas fa-copy"></i>
                    </button>
                </div>
            </div>
        </section>

        <section id="alacritty-config" class="section">
            <h2><i class="fas fa-terminal"></i> Alacritty Terminal Configuration</h2>
            
            <div class="command-block">
                <h3>Enhanced Terminal Colors and Transparency</h3>
                <div class="code-container">
                    <code># Enhance Alacritty config with better colors and transparency
cat > ~/.config/alacritty/alacritty.toml <<'EOF'
[window]
opacity = 0.95
padding = { x = 8, y = 8 }
decorations = "none"
startup_mode = "Windowed"

[font]
normal = { family = "JetBrains Mono Nerd Font", style = "Regular" }
bold = { family = "JetBrains Mono Nerd Font", style = "Bold" }
italic = { family = "JetBrains Mono Nerd Font", style = "Italic" }
size = 12

[colors.primary]
background = "#2e3440"
foreground = "#d8dee9"
dim_foreground = "#a5aaad"

[colors.cursor]
text = "#2e3440"
cursor = "#d8dee9"

[colors.vi_mode_cursor]
text = "#2e3440"
cursor = "#d8dee9"

[colors.selection]
text = "CellForeground"
background = "#4c566a"

[colors.search.matches]
foreground = "#2e3440"
background = "#88c0d0"

[colors.search.focused_match]
foreground = "#2e3440"
background = "#5e81ac"

[colors.normal]
black = "#3b4252"
red = "#bf616a"
green = "#a3be8c"
yellow = "#ebcb8b"
blue = "#81a1c1"
magenta = "#b48ead"
cyan = "#88c0d0"
white = "#e5e9f0"

[colors.bright]
black = "#4c566a"
red = "#bf616a"
green = "#a3be8c"
yellow = "#ebcb8b"
blue = "#81a1c1"
magenta = "#b48ead"
cyan = "#8fbcbb"
white = "#eceff4"

[colors.dim]
black = "#373e4d"
red = "#94545d"
green = "#809575"
yellow = "#b29e75"
blue = "#68809a"
magenta = "#8c738c"
cyan = "#6d96a5"
white = "#aeb3bb"

[cursor.style]
shape = "Block"
blinking = "On"

[scrolling]
history = 10000
EOF</code>
                    <button class="copy-btn" onclick="copyToClipboard(this)">
                        <i class="fas fa-copy"></i>
                    </button>
                </div>
            </div>
        </section>

        <section id="i3-aesthetics" class="section">
            <h2><i class="fas fa-palette"></i> i3 Aesthetics</h2>
            
            <div class="command-block">
                <h3>Enhanced i3 Visual Configuration</h3>
                <div class="code-container">
                    <code># Backup current i3 config
cp ~/.config/i3/config ~/.config/i3/config.backup && \

# Add only essential aesthetics to i3 config (NO window-specific rules)
cat >> ~/.config/i3/config <<'EOF'

# Enhanced aesthetics
for_window [class=".*"] border pixel 2
gaps inner 8
gaps outer 4

# Nord Color Scheme
set $nord0  #2e3440
set $nord1  #3b4252
set $nord2  #434c5e
set $nord3  #4c566a
set $nord4  #d8dee9
set $nord5  #e5e9f0
set $nord6  #eceff4
set $nord7  #8fbcbb
set $nord8  #88c0d0
set $nord9  #81a1c1
set $nord10 #5e81ac
set $nord11 #bf616a
set $nord12 #d08770
set $nord13 #ebcb8b
set $nord14 #a3be8c
set $nord15 #b48ead

# Window colors (Nord theme)
#                       border  background text    indicator child_border
client.focused          $nord8  $nord0    $nord4   $nord8    $nord8
client.focused_inactive $nord3  $nord1    $nord4   $nord3    $nord3
client.unfocused        $nord1  $nord0    $nord3   $nord1    $nord1
client.urgent           $nord11 $nord11   $nord6   $nord11   $nord11
client.placeholder      $nord0  $nord0    $nord4   $nord0    $nord0
EOF</code>
                    <button class="copy-btn" onclick="copyToClipboard(this)">
                        <i class="fas fa-copy"></i>
                    </button>
                </div>
            </div>
        </section>

        <section id="notifications" class="section">
            <h2><i class="fas fa-bell"></i> Notification System</h2>
            
            <div class="command-block">
                <h3>Configure Dunst Notifications</h3>
                <div class="code-container">
                    <code>mkdir -p ~/.config/dunst && \
cat > ~/.config/dunst/dunstrc <<'EOF'
[global]
monitor = 0
follow = keyboard
geometry = "320x60-20+48"
indicate_hidden = yes
shrink = no
transparency = 5
notification_height = 0
separator_height = 2
padding = 12
horizontal_padding = 12
frame_width = 2
frame_color = "#88c0d0"
separator_color = "#434c5e"
sort = yes
idle_threshold = 120
font = JetBrains Mono Nerd Font Medium 10
line_height = 4
markup = full
format = "%s\n%b"
alignment = left
show_age_threshold = 60
word_wrap = yes
ellipsize = middle
ignore_newline = no
stack_duplicates = true
hide_duplicate_count = false
show_indicators = yes
icon_position = left
max_icon_size = 48
sticky_history = yes
history_length = 20
rofi = ~/.config/scripts/rofi_run.sh
browser = firefox
always_run_script = true
title = Dunst
class = Dunst
startup_notification = false
verbosity = mesg
corner_radius = 8
mouse_left_click = close_current
mouse_middle_click = do_action
mouse_right_click = close_all

[experimental]
per_monitor_dpi = false

[shortcuts]
close = ctrl+space
close_all = ctrl+shift+space
history = ctrl+grave
context = ctrl+shift+period

[urgency_low]
background = "#2e3440"
foreground = "#d8dee9"
frame_color = "#5e81ac"
timeout = 4
icon = dialog-information

[urgency_normal]
background = "#2e3440"
foreground = "#d8dee9"
frame_color = "#88c0d0"
timeout = 8
icon = dialog-information

[urgency_critical]
background = "#2e3440"
foreground = "#eceff4"
frame_color = "#bf616a"
timeout = 0
icon = dialog-warning
EOF

# Add dunst to i3 autostart
sed -i '/exec --no-startup-id picom/a exec --no-startup-id dunst' ~/.config/i3/config</code>
                    <button class="copy-btn" onclick="copyToClipboard(this)">
                        <i class="fas fa-copy"></i>
                    </button>
                </div>
            </div>
        </section>

        <section id="firefox" class="section">
            <h2><i class="fas fa-sparkles"></i> Firefox</h2>
            
            <div class="command-block">
                <h3>Firefox nord theme</h3>
                <div class="code-container">
                    <code>#!/bin/bash
set -e  # Exit on error

# Colors for output
RED='\033[0;31m'
GREEN='\033[0;32m'
YELLOW='\033[1;33m'
BLUE='\033[0;34m'
NC='\033[0m' # No Color

# Function to print colored output
print_status() {
    echo -e "${BLUE}[INFO]${NC} $1"
}

print_success() {
    echo -e "${GREEN}[SUCCESS]${NC} $1"
}

print_warning() {
    echo -e "${YELLOW}[WARNING]${NC} $1"
}

print_error() {
    echo -e "${RED}[ERROR]${NC} $1"
}

# Check if Firefox is running
check_firefox_running() {
    if pgrep -x "firefox" > /dev/null; then
        print_warning "Firefox is currently running."
        read -p "Close Firefox and press Enter to continue, or Ctrl+C to abort: "
        
        # Check again after user confirmation
        if pgrep -x "firefox" > /dev/null; then
            print_error "Firefox is still running. Please close it completely and run this script again."
            exit 1
        fi
    fi
}

# Backup existing files
backup_existing_files() {
    local profile_dir="$1"
    local backup_dir="$profile_dir/chrome_backup_$(date +%Y%m%d_%H%M%S)"
    
    if [ -d "$profile_dir/chrome" ]; then
        print_status "Backing up existing chrome directory to: $backup_dir"
        mkdir -p "$backup_dir"
        cp -r "$profile_dir/chrome" "$backup_dir/"
    fi
    
    if [ -f "$profile_dir/user.js" ]; then
        print_status "Backing up existing user.js"
        cp "$profile_dir/user.js" "$backup_dir/user.js" 2>/dev/null || mkdir -p "$backup_dir" && cp "$profile_dir/user.js" "$backup_dir/user.js"
    fi
}

print_status "Starting Firefox Nord Theme installation..."

# Check if Firefox is running
check_firefox_running

# Find Firefox profile directory with better detection
print_status "Searching for Firefox profile..."

FIREFOX_PROFILE=""

# Try different possible locations and patterns
for pattern in ~/.mozilla/firefox/*.default* ~/.mozilla/firefox/*.default-release* ~/.mozilla/firefox/*default*; do
    if [ -d "$pattern" ]; then
        FIREFOX_PROFILE="$pattern"
        break
    fi
done

# If still not found, try the profiles.ini approach
if [ -z "$FIREFOX_PROFILE" ] && [ -f ~/.mozilla/firefox/profiles.ini ]; then
    print_status "Trying profiles.ini method..."
    PROFILE_PATH=$(grep -E "^Path=" ~/.mozilla/firefox/profiles.ini | head -n1 | cut -d'=' -f2)
    if [ -n "$PROFILE_PATH" ]; then
        FIREFOX_PROFILE="$HOME/.mozilla/firefox/$PROFILE_PATH"
    fi
fi

if [ -z "$FIREFOX_PROFILE" ] || [ ! -d "$FIREFOX_PROFILE" ]; then
    print_error "Firefox profile not found!"
    echo "Please ensure Firefox has been run at least once to create a profile."
    echo "You can also manually set the profile path by running:"
    echo "export FIREFOX_PROFILE=\"/path/to/your/profile\" && bash this_script.sh"
    exit 1
fi

print_success "Found Firefox profile: $FIREFOX_PROFILE"

# Backup existing files
backup_existing_files "$FIREFOX_PROFILE"

# Create chrome directory
print_status "Creating chrome directory..."
mkdir -p "$FIREFOX_PROFILE/chrome"

# Create userChrome.css
print_status "Installing userChrome.css (browser interface theme)..."
cat > "$FIREFOX_PROFILE/chrome/userChrome.css" <<'EOF'
/* Firefox Nord Theme - Browser Interface */
/* Enhanced version with better compatibility and more elements */

/* Nord Color Variables */
:root {
  --nord0: #2e3440;   /* Polar Night - darkest */
  --nord1: #3b4252;   /* Polar Night */
  --nord2: #434c5e;   /* Polar Night */
  --nord3: #4c566a;   /* Polar Night - lightest */
  --nord4: #d8dee9;   /* Snow Storm - darkest */
  --nord5: #e5e9f0;   /* Snow Storm */
  --nord6: #eceff4;   /* Snow Storm - lightest */
  --nord7: #8fbcbb;   /* Frost - teal */
  --nord8: #88c0d0;   /* Frost - light blue */
  --nord9: #81a1c1;   /* Frost - blue */
  --nord10: #5e81ac;  /* Frost - dark blue */
  --nord11: #bf616a;  /* Aurora - red */
  --nord12: #d08770;  /* Aurora - orange */
  --nord13: #ebcb8b;  /* Aurora - yellow */
  --nord14: #a3be8c;  /* Aurora - green */
  --nord15: #b48ead;  /* Aurora - purple */
}

/* Main browser window */
#main-window {
  background-color: var(--nord0) !important;
}

/* Tab bar styling */
.tabbrowser-tab {
  background-color: var(--nord1) !important;
  border: none !important;
  border-radius: 6px 6px 0 0 !important;
  margin-right: 2px !important;
  margin-top: 2px !important;
}

.tabbrowser-tab[selected="true"] {
  background-color: var(--nord0) !important;
}

.tabbrowser-tab[selected="true"] .tab-label {
  color: var(--nord4) !important;
  font-weight: 500 !important;
}

.tabbrowser-tab:not([selected="true"]) {
  background-color: var(--nord2) !important;
}

.tabbrowser-tab:not([selected="true"]) .tab-label {
  color: var(--nord4) !important;
  opacity: 0.8;
}

.tabbrowser-tab:not([selected="true"]):hover {
  background-color: var(--nord3) !important;
}

.tab-background {
  background-color: transparent !important;
  border: none !important;
}

/* Tab close button */
.tab-close-button {
  fill: var(--nord4) !important;
  opacity: 0.7 !important;
}

.tab-close-button:hover {
  background-color: var(--nord11) !important;
  border-radius: 50% !important;
  opacity: 1 !important;
}

/* URL/Address bar */
#urlbar {
  background-color: var(--nord1) !important;
  border: 1px solid var(--nord3) !important;
  border-radius: 8px !important;
  color: var(--nord4) !important;
  box-shadow: none !important;
}

#urlbar[focused="true"] {
  background-color: var(--nord0) !important;
  border-color: var(--nord8) !important;
  box-shadow: 0 0 0 1px var(--nord8) !important;
}

#urlbar-input {
  color: var(--nord4) !important;
}

/* URL bar suggestions */
#urlbar-results {
  background-color: var(--nord1) !important;
  border: 1px solid var(--nord3) !important;
  border-radius: 8px !important;
}

.urlbarView-row[selected] {
  background-color: var(--nord8) !important;
  color: var(--nord0) !important;
}

/* Navigation bar */
#nav-bar {
  background-color: var(--nord0) !important;
  border-bottom: 1px solid var(--nord3) !important;
}

/* Navigation buttons */
.toolbarbutton-1 {
  fill: var(--nord4) !important;
  color: var(--nord4) !important;
}

.toolbarbutton-1:hover {
  background-color: var(--nord2) !important;
  border-radius: 6px !important;
}

.toolbarbutton-1[open="true"] {
  background-color: var(--nord8) !important;
  fill: var(--nord0) !important;
}

/* Back/Forward buttons */
#back-button, #forward-button {
  border-radius: 50% !important;
}

/* Bookmarks toolbar */
#PersonalToolbar {
  background-color: var(--nord1) !important;
  border-bottom: 1px solid var(--nord3) !important;
}

.bookmark-item {
  color: var(--nord4) !important;
  border-radius: 4px !important;
}

.bookmark-item:hover {
  background-color: var(--nord2) !important;
  color: var(--nord6) !important;
}

/* Sidebar */
#sidebar-box {
  background-color: var(--nord1) !important;
  border-right: 1px solid var(--nord3) !important;
}

#sidebar-header {
  background-color: var(--nord0) !important;
  border-bottom: 1px solid var(--nord3) !important;
  color: var(--nord4) !important;
}

/* Context menus */
menupopup {
  background-color: var(--nord1) !important;
  border: 1px solid var(--nord3) !important;
  border-radius: 8px !important;
}

menuitem {
  color: var(--nord4) !important;
}

menuitem:hover {
  background-color: var(--nord8) !important;
  color: var(--nord0) !important;
}

menuseparator {
  border-color: var(--nord3) !important;
}

/* Dropdown panels */
.panel-arrowcontent {
  background-color: var(--nord1) !important;
  border: 1px solid var(--nord3) !important;
  border-radius: 8px !important;
}

/* Status bar / Find bar */
.findbar-textbox {
  background-color: var(--nord1) !important;
  border: 1px solid var(--nord3) !important;
  color: var(--nord4) !important;
}

/* Scrollbars */
scrollbar {
  background-color: var(--nord1) !important;
}

thumb {
  background-color: var(--nord3) !important;
  border-radius: 10px !important;
}

thumb:hover {
  background-color: var(--nord8) !important;
}
EOF

# Create userContent.css
print_status "Installing userContent.css (web content theme)..."
cat > "$FIREFOX_PROFILE/chrome/userContent.css" <<'EOF'
/* Firefox Nord Theme - Web Content */
/* Enhanced version with better coverage */

/* About pages styling */
@-moz-document url-prefix(about:) {
  body, html {
    background-color: #2e3440 !important;
    color: #d8dee9 !important;
  }
  
  /* Links */
  a, a:link {
    color: #88c0d0 !important;
  }
  
  a:visited {
    color: #b48ead !important;
  }
  
  a:hover {
    color: #8fbcbb !important;
  }
  
  /* Headers */
  h1, h2, h3, h4, h5, h6 {
    color: #e5e9f0 !important;
  }
  
  /* Form elements */
  input, textarea, select {
    background-color: #3b4252 !important;
    border: 1px solid #4c566a !important;
    color: #d8dee9 !important;
    border-radius: 4px !important;
  }
  
  input:focus, textarea:focus, select:focus {
    border-color: #88c0d0 !important;
    box-shadow: 0 0 0 1px #88c0d0 !important;
  }
  
  /* Buttons */
  button, input[type="button"], input[type="submit"] {
    background-color: #5e81ac !important;
    border: none !important;
    color: #eceff4 !important;
    border-radius: 6px !important;
    padding: 8px 16px !important;
  }
  
  button:hover, input[type="button"]:hover, input[type="submit"]:hover {
    background-color: #81a1c1 !important;
  }
  
  /* Tables */
  table {
    border-collapse: collapse !important;
  }
  
  th, td {
    border: 1px solid #4c566a !important;
    padding: 8px !important;
  }
  
  th {
    background-color: #3b4252 !important;
    color: #e5e9f0 !important;
  }
  
  tr:nth-child(even) {
    background-color: #3b4252 !important;
  }
}

/* New Tab page */
@-moz-document url(about:newtab), url(about:home) {
  body, html {
    background-color: #2e3440 !important;
    color: #d8dee9 !important;
  }
  
  /* Search box */
  .search-wrapper input, .search-handoff-button {
    background-color: #3b4252 !important;
    border: 1px solid #4c566a !important;
    color: #d8dee9 !important;
    border-radius: 8px !important;
  }
  
  .search-wrapper input:focus {
    border-color: #88c0d0 !important;
    box-shadow: 0 0 0 1px #88c0d0 !important;
  }
  
  /* Top sites */
  .top-site-outer {
    background-color: #3b4252 !important;
    border-radius: 8px !important;
  }
  
  .top-site-outer:hover {
    background-color: #434c5e !important;
  }
  
  .top-site-inner .title {
    color: #d8dee9 !important;
  }
  
  /* Activity Stream components */
  .ds-card {
    background-color: #3b4252 !important;
    border: 1px solid #4c566a !important;
  }
  
  .ds-card-link:hover {
    background-color: #434c5e !important;
  }
}

/* About:preferences */
@-moz-document url(about:preferences) {
  #categories {
    background-color: #3b4252 !important;
  }
  
  .category {
    color: #d8dee9 !important;
  }
  
  .category[selected] {
    background-color: #5e81ac !important;
    color: #eceff4 !important;
  }
  
  .category:hover {
    background-color: #434c5e !important;
  }
}

/* About:addons */
@-moz-document url(about:addons) {
  #categories {
    background-color: #3b4252 !important;
  }
  
  .category {
    color: #d8dee9 !important;
  }
  
  .category[selected] {
    background-color: #5e81ac !important;
  }
  
  addon-card {
    background-color: #3b4252 !important;
    border: 1px solid #4c566a !important;
  }
}

/* Developer Tools (limited styling) */
@-moz-document url-prefix(about:devtools) {
  body {
    background-color: #2e3440 !important;
    color: #d8dee9 !important;
  }
}
EOF

# Update or create user.js with enhanced preferences
print_status "Configuring Firefox preferences..."

# Create a temporary file with our preferences
cat > "/tmp/firefox_nord_prefs.js" <<'EOF'
/* Firefox Nord Theme Preferences */
user_pref("toolkit.legacyUserProfileCustomizations.stylesheets", true);
user_pref("browser.tabs.drawInTitlebar", true);
user_pref("browser.uidensity", 1);
user_pref("svg.context-properties.content.enabled", true);
user_pref("browser.theme.content-theme", 0);
user_pref("browser.theme.toolbar-theme", 0);
EOF

# Handle user.js file
if [ -f "$FIREFOX_PROFILE/user.js" ]; then
    print_status "Updating existing user.js..."
    
    # Remove any existing Nord theme preferences to avoid duplicates
    grep -v "Firefox Nord Theme" "$FIREFOX_PROFILE/user.js" > "/tmp/user_js_clean" 2>/dev/null || touch "/tmp/user_js_clean"
    grep -v "toolkit.legacyUserProfileCustomizations.stylesheets" "/tmp/user_js_clean" > "/tmp/user_js_clean2" 2>/dev/null || touch "/tmp/user_js_clean2"
    grep -v "browser.tabs.drawInTitlebar" "/tmp/user_js_clean2" > "/tmp/user_js_clean3" 2>/dev/null || touch "/tmp/user_js_clean3"
    
    # Combine cleaned file with new preferences
    cat "/tmp/user_js_clean3" "/tmp/firefox_nord_prefs.js" > "$FIREFOX_PROFILE/user.js"
    
    # Cleanup temp files
    rm -f "/tmp/user_js_clean" "/tmp/user_js_clean2" "/tmp/user_js_clean3"
else
    print_status "Creating new user.js..."
    cp "/tmp/firefox_nord_prefs.js" "$FIREFOX_PROFILE/user.js"
fi

# Cleanup temp file
rm -f "/tmp/firefox_nord_prefs.js"

# Set appropriate permissions
chmod 644 "$FIREFOX_PROFILE/chrome/userChrome.css"
chmod 644 "$FIREFOX_PROFILE/chrome/userContent.css"
chmod 644 "$FIREFOX_PROFILE/user.js"

print_success "Firefox Nord theme installation completed!"

echo
print_status "Installation Summary:"
echo "  âœ“ Created chrome directory"
echo "  âœ“ Installed userChrome.css (browser interface theme)"
echo "  âœ“ Installed userContent.css (web content theme)"
echo "  âœ“ Updated Firefox preferences"
echo "  âœ“ Created backup of existing files (if any)"

echo
print_warning "Important Notes:"
echo "  1. Restart Firefox completely to see the changes"
echo "  2. The theme works best with Firefox's default Dark theme"
echo "  3. Some extensions may override certain styles"
echo "  4. If you encounter issues, restore from the backup created"

echo
print_status "Optional: You can also set Firefox to Dark theme in Preferences > General > Theme"

echo
print_success "Enjoy your new Nord-themed Firefox! ðŸŽ¨"</code>
                    <button class="copy-btn" onclick="copyToClipboard(this)">
                        <i class="fas fa-copy"></i>
                    </button>
                </div>
            </div>
        </section>

        <section id="thunar" class="section">
            <h2><i class="fas fa-sparkles"></i> Thunar</h2>
            
            <div class="command-block">
                <h3>Thunar nord theme</h3>
                <div class="code-container">
                    <code>#!/bin/bash
set -e

# Colors for output
RED='\033[0;31m'
GREEN='\033[0;32m'
YELLOW='\033[1;33m'
BLUE='\033[0;34m'
NC='\033[0m'

print_status() {
    echo -e "${BLUE}[INFO]${NC} $1"
}

print_success() {
    echo -e "${GREEN}[SUCCESS]${NC} $1"
}

print_warning() {
    echo -e "${YELLOW}[WARNING]${NC} $1"
}

print_error() {
    echo -e "${RED}[ERROR]${NC} $1"
}

print_status "Installing enhanced Thunar/GTK Nord theme..."

# Create backup if files exist
backup_config() {
    local config_dir="$HOME/.config/gtk-3.0"
    local backup_dir="$config_dir/backup_$(date +%Y%m%d_%H%M%S)"
    
    if [ -f "$config_dir/gtk.css" ] || [ -f "$config_dir/settings.ini" ]; then
        print_status "Creating backup of existing GTK configuration..."
        mkdir -p "$backup_dir"
        [ -f "$config_dir/gtk.css" ] && cp "$config_dir/gtk.css" "$backup_dir/"
        [ -f "$config_dir/settings.ini" ] && cp "$config_dir/settings.ini" "$backup_dir/"
        print_success "Backup created at: $backup_dir"
    fi
}

# Create backup
backup_config

# Create GTK config directory
mkdir -p ~/.config/gtk-3.0 && \

print_status "Installing enhanced gtk.css..."

# Create comprehensive GTK CSS theme
cat > ~/.config/gtk-3.0/gtk.css <<'EOF'
/* Enhanced Nord Theme for GTK Applications (Thunar, File Managers, etc.) */
/* Comprehensive theming with better coverage and modern styling */

/* Nord Color Palette */
@define-color nord0 #2e3440;  /* Polar Night - darkest */
@define-color nord1 #3b4252;  /* Polar Night */
@define-color nord2 #434c5e;  /* Polar Night */
@define-color nord3 #4c566a;  /* Polar Night - lightest */
@define-color nord4 #d8dee9;  /* Snow Storm - darkest */
@define-color nord5 #e5e9f0;  /* Snow Storm */
@define-color nord6 #eceff4;  /* Snow Storm - lightest */
@define-color nord7 #8fbcbb;  /* Frost - teal */
@define-color nord8 #88c0d0;  /* Frost - light blue */
@define-color nord9 #81a1c1;  /* Frost - blue */
@define-color nord10 #5e81ac; /* Frost - dark blue */
@define-color nord11 #bf616a; /* Aurora - red */
@define-color nord12 #d08770; /* Aurora - orange */
@define-color nord13 #ebcb8b; /* Aurora - yellow */
@define-color nord14 #a3be8c; /* Aurora - green */
@define-color nord15 #b48ead; /* Aurora - purple */

/* Derived colors for consistency */
@define-color bg_color @nord0;
@define-color fg_color @nord4;
@define-color base_color @nord1;
@define-color text_color @nord4;
@define-color selected_bg_color @nord8;
@define-color selected_fg_color @nord0;
@define-color tooltip_bg_color @nord2;
@define-color tooltip_fg_color @nord4;

/* === GLOBAL STYLES === */

/* Main application windows */
window, .background {
    background-color: @nord0;
    color: @nord4;
}

/* All text */
* {
    color: @nord4;
    -gtk-secondary-caret-color: @nord8;
}

/* === THUNAR SPECIFIC STYLES === */

/* Main Thunar window */
.thunar {
    background-color: @nord0;
}

/* Thunar toolbar */
.thunar toolbar {
    background: linear-gradient(to bottom, @nord1, shade(@nord1, 0.95));
    border-bottom: 1px solid @nord3;
    padding: 4px;
}

/* Location bar (path bar) */
.thunar .path-bar {
    background-color: @nord1;
    border: 1px solid @nord3;
    border-radius: 6px;
    padding: 2px;
}

.thunar .path-bar button {
    background-color: transparent;
    color: @nord4;
    border: none;
    border-radius: 4px;
    padding: 6px 10px;
    margin: 1px;
    font-weight: 500;
}

.thunar .path-bar button:hover {
    background-color: @nord2;
    color: @nord6;
}

.thunar .path-bar button:active {
    background-color: @nord8;
    color: @nord0;
}

/* Thunar sidebar */
.thunar .sidebar {
    background-color: @nord1;
    border-right: 1px solid @nord3;
    padding: 8px 4px;
}

.thunar .sidebar row {
    border-radius: 6px;
    margin: 2px 4px;
    padding: 8px;
}

.thunar .sidebar row:hover {
    background-color: @nord2;
}

.thunar .sidebar row:selected {
    background-color: @nord8;
    color: @nord0;
    font-weight: 500;
}

/* File/folder view area */
.thunar .view {
    background-color: @nord0;
    border: none;
}

/* === GENERAL GTK WIDGETS === */

/* Toolbars and header bars */
toolbar, headerbar {
    background: linear-gradient(to bottom, @nord1, shade(@nord1, 0.95));
    color: @nord4;
    border-bottom: 1px solid @nord3;
    box-shadow: inset 0 1px rgba(255, 255, 255, 0.05);
}

headerbar {
    border-radius: 8px 8px 0 0;
    padding: 6px 12px;
}

/* Buttons */
button {
    background: linear-gradient(to bottom, @nord1, shade(@nord1, 0.9));
    color: @nord4;
    border: 1px solid @nord3;
    border-radius: 6px;
    padding: 8px 16px;
    font-weight: 500;
    transition: all 200ms ease;
}

button:hover {
    background: linear-gradient(to bottom, @nord2, shade(@nord2, 0.9));
    border-color: @nord8;
    color: @nord6;
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
}

button:active {
    background: linear-gradient(to bottom, @nord3, @nord2);
    box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.2);
}

button:disabled {
    background-color: shade(@nord1, 0.8);
    color: shade(@nord4, 0.6);
    border-color: shade(@nord3, 0.8);
}

/* Primary buttons */
button.suggested-action {
    background: linear-gradient(to bottom, @nord8, shade(@nord8, 0.9));
    color: @nord0;
    border-color: @nord10;
}

button.suggested-action:hover {
    background: linear-gradient(to bottom, @nord9, @nord8);
}

button.destructive-action {
    background: linear-gradient(to bottom, @nord11, shade(@nord11, 0.9));
    color: @nord6;
    border-color: shade(@nord11, 0.8);
}

/* Entry fields and text inputs */
entry {
    background-color: @nord1;
    color: @nord4;
    border: 1px solid @nord3;
    border-radius: 6px;
    padding: 8px 12px;
    selection-background-color: @nord8;
    selection-color: @nord0;
}

entry:focus {
    border-color: @nord8;
    box-shadow: 0 0 0 2px alpha(@nord8, 0.3);
    background-color: shade(@nord1, 1.05);
}

entry:disabled {
    background-color: shade(@nord1, 0.8);
    color: shade(@nord4, 0.6);
}

/* Tree and list views */
treeview, listbox {
    background-color: @nord0;
    color: @nord4;
    border: 1px solid @nord3;
    border-radius: 6px;
}

treeview:selected, listbox row:selected {
    background-color: @nord8;
    color: @nord0;
}

treeview:selected:backdrop, listbox row:selected:backdrop {
    background-color: alpha(@nord8, 0.7);
}

/* Tree view headers */
treeview header button {
    background: linear-gradient(to bottom, @nord1, shade(@nord1, 0.95));
    color: @nord4;
    border: 1px solid @nord3;
    border-radius: 0;
    font-weight: 600;
}

treeview header button:hover {
    background-color: @nord2;
}

/* Scrollbars */
scrollbar {
    background-color: @nord1;
    border-radius: 10px;
}

scrollbar slider {
    background-color: @nord3;
    border-radius: 10px;
    min-width: 12px;
    min-height: 12px;
    margin: 2px;
}

scrollbar slider:hover {
    background-color: @nord8;
}

scrollbar slider:active {
    background-color: @nord10;
}

/* Notebook tabs */
notebook {
    background-color: @nord0;
}

notebook header {
    background-color: @nord1;
    border-bottom: 1px solid @nord3;
}

notebook tab {
    background-color: transparent;
    color: @nord4;
    border: none;
    border-radius: 6px 6px 0 0;
    padding: 10px 16px;
    margin: 2px 1px 0 1px;
}

notebook tab:hover {
    background-color: alpha(@nord2, 0.7);
}

notebook tab:checked {
    background-color: @nord0;
    color: @nord6;
    border-bottom: 3px solid @nord8;
    font-weight: 600;
}

/* Sidebars */
sidebar {
    background-color: @nord1;
    color: @nord4;
    border-right: 1px solid @nord3;
}

sidebar row {
    padding: 8px 12px;
    border-radius: 6px;
    margin: 2px 6px;
}

sidebar row:hover {
    background-color: @nord2;
}

sidebar row:selected {
    background-color: @nord8;
    color: @nord0;
    font-weight: 500;
}

/* Context menus */
menu, .context-menu {
    background-color: @nord1;
    color: @nord4;
    border: 1px solid @nord3;
    border-radius: 8px;
    padding: 4px;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
}

menuitem {
    padding: 8px 12px;
    border-radius: 4px;
    margin: 1px;
}

menuitem:hover {
    background-color: @nord8;
    color: @nord0;
}

menuitem:disabled {
    color: shade(@nord4, 0.6);
}

separator {
    background-color: @nord3;
    margin: 4px 8px;
}

/* Progress bars */
progressbar {
    background-color: @nord2;
    border-radius: 10px;
    overflow: hidden;
}

progressbar progress {
    background: linear-gradient(90deg, @nord8, @nord9);
    border-radius: 10px;
    transition: width 300ms ease;
}

/* Tooltips */
tooltip {
    background-color: @nord2;
    color: @nord4;
    border: 1px solid @nord3;
    border-radius: 6px;
    padding: 8px 12px;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);
}

/* Check boxes and radio buttons */
checkbutton check, radiobutton radio {
    background-color: @nord1;
    border: 2px solid @nord3;
    border-radius: 4px;
    min-width: 16px;
    min-height: 16px;
}

checkbutton check:checked, radiobutton radio:checked {
    background-color: @nord8;
    border-color: @nord8;
    color: @nord0;
}

radiobutton radio {
    border-radius: 50%;
}

/* Switches */
switch {
    background-color: @nord3;
    border-radius: 20px;
    min-width: 44px;
    min-height: 24px;
}

switch:checked {
    background-color: @nord8;
}

switch slider {
    background-color: @nord6;
    border-radius: 50%;
    min-width: 20px;
    min-height: 20px;
    margin: 2px;
}

/* Popover menus */
popover {
    background-color: @nord1;
    border: 1px solid @nord3;
    border-radius: 8px;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
}

/* Dialog boxes */
dialog {
    background-color: @nord0;
    color: @nord4;
    border-radius: 8px;
}

/* File chooser specific */
filechooser {
    background-color: @nord0;
}

filechooser .path-bar {
    background-color: @nord1;
    border: 1px solid @nord3;
    border-radius: 6px;
}

/* Spinbuttons */
spinbutton {
    background-color: @nord1;
    border: 1px solid @nord3;
    border-radius: 6px;
}

spinbutton:focus {
    border-color: @nord8;
    box-shadow: 0 0 0 2px alpha(@nord8, 0.3);
}

/* Scale/sliders */
scale {
    min-height: 20px;
}

scale trough {
    background-color: @nord2;
    border-radius: 10px;
    min-height: 6px;
}

scale highlight {
    background-color: @nord8;
    border-radius: 10px;
}

scale slider {
    background-color: @nord6;
    border: 2px solid @nord8;
    border-radius: 50%;
    min-width: 18px;
    min-height: 18px;
}

scale slider:hover {
    background-color: @nord8;
    border-color: @nord10;
}

/* Level bars */
levelbar block {
    background-color: @nord8;
    border-radius: 2px;
    margin: 1px;
}

levelbar block.empty {
    background-color: @nord2;
}

/* Status bars */
statusbar {
    background-color: @nord1;
    color: @nord4;
    border-top: 1px solid @nord3;
    padding: 4px 8px;
}

/* Search bars */
searchbar {
    background-color: @nord1;
    border-bottom: 1px solid @nord3;
    padding: 6px;
}

/* Info bars */
infobar {
    background-color: @nord1;
    color: @nord4;
    border-bottom: 1px solid @nord3;
}

infobar.info {
    background-color: @nord9;
    color: @nord0;
}

infobar.warning {
    background-color: @nord13;
    color: @nord0;
}

infobar.error {
    background-color: @nord11;
    color: @nord6;
}

/* Accent color overrides for better integration */
@define-color accent_color @nord8;
@define-color accent_bg_color @nord8;
@define-color accent_fg_color @nord0;

/* Selection colors */
selection {
    background-color: @nord8;
    color: @nord0;
}
EOF

print_status "Installing enhanced settings.ini..."

# Create enhanced GTK settings
cat > ~/.config/gtk-3.0/settings.ini <<'EOF'
[Settings]
# Theme settings
gtk-theme-name=Adwaita-dark
gtk-icon-theme-name=Papirus-Dark
gtk-cursor-theme-name=Adwaita
gtk-cursor-theme-size=24

# Font settings (adjust as needed)
gtk-font-name=Inter 10
gtk-xft-antialias=1
gtk-xft-hinting=1
gtk-xft-hintstyle=hintfull
gtk-xft-rgba=rgb

# Application behavior
gtk-application-prefer-dark-theme=1
gtk-button-images=0
gtk-menu-images=0
gtk-enable-event-sounds=1
gtk-enable-input-feedback-sounds=0

# Toolbar settings
gtk-toolbar-style=GTK_TOOLBAR_BOTH_HORIZ
gtk-toolbar-icon-size=GTK_ICON_SIZE_LARGE_TOOLBAR

# Window settings
gtk-decoration-layout=:minimize,maximize,close
gtk-primary-button-warps-slider=1
gtk-overlay-scrolling=1

# Dialog settings
gtk-dialogs-use-header=1
gtk-shell-shows-app-menu=0
gtk-shell-shows-menubar=0

# Animation settings
gtk-enable-animations=1
gtk-enable-primary-paste=1

# Miscellaneous
gtk-recent-files-max-age=30
gtk-recent-files-limit=50
gtk-print-preview-command=evince --unlink-tempfile --preview --print-settings %s %f
EOF

# Also create gtk-2.0 theme for older applications
print_status "Installing GTK-2.0 theme for legacy applications..."
mkdir -p ~/.themes/Nord-Custom/gtk-2.0 && \

cat > ~/.themes/Nord-Custom/gtk-2.0/gtkrc <<'EOF'
# Nord theme for GTK-2.0 applications
gtk-color-scheme = "base_color:#2e3440\nfg_color:#d8dee9\ntooltip_fg_color:#d8dee9\nselected_bg_color:#88c0d0\nselected_fg_color:#2e3440\ntext_color:#d8dee9\nbg_color:#3b4252\ntooltip_bg_color:#434c5e\ninsensitive_bg_color:#4c566a\ninsensitive_fg_color:#d8dee9"

style "default" {
    xthickness = 1
    ythickness = 1
    
    GtkMenuItem::selected_shadow_type = none
    GtkWidget::interior_focus = 1
    GtkButton::default_border = { 0, 0, 0, 0 }
    GtkButton::default_outside_border = { 0, 0, 0, 0 }
    GtkRange::trough_border = 0
    GtkWidget::focus_padding = 1
    GtkPaned::handle_size = 6
    GtkRange::slider_width = 15
    GtkRange::stepper_size = 15
    GtkScrollbar::min_slider_length = 30
    GtkCheckButton::indicator_size = 12
    GtkMenuBar::internal-padding = 0
    
    bg[NORMAL] = @bg_color
    bg[PRELIGHT] = shade(1.1, @bg_color)
    bg[SELECTED] = @selected_bg_color
    bg[INSENSITIVE] = @insensitive_bg_color
    bg[ACTIVE] = shade(0.9, @bg_color)
    
    fg[NORMAL] = @fg_color
    fg[PRELIGHT] = @fg_color
    fg[SELECTED] = @selected_fg_color
    fg[INSENSITIVE] = @insensitive_fg_color
    fg[ACTIVE] = @fg_color
    
    text[NORMAL] = @text_color
    text[PRELIGHT] = @text_color
    text[SELECTED] = @selected_fg_color
    text[INSENSITIVE] = @insensitive_fg_color
    text[ACTIVE] = @selected_fg_color
    
    base[NORMAL] = @base_color
    base[PRELIGHT] = shade(1.05, @base_color)
    base[SELECTED] = @selected_bg_color
    base[INSENSITIVE] = @insensitive_bg_color
    base[ACTIVE] = shade(0.9, @selected_bg_color)
}

class "GtkWidget" style "default"
EOF

# Create .gtkrc-2.0 in home directory
cat > ~/.gtkrc-2.0 <<'EOF'
# GTK-2.0 Nord theme
include "/home/$USER/.themes/Nord-Custom/gtk-2.0/gtkrc"
gtk-theme-name="Nord-Custom"
gtk-icon-theme-name="Papirus-Dark"
gtk-font-name="Inter 10"
EOF

# Set proper permissions
chmod 644 ~/.config/gtk-3.0/gtk.css
chmod 644 ~/.config/gtk-3.0/settings.ini
chmod 644 ~/.themes/Nord-Custom/gtk-2.0/gtkrc
chmod 644 ~/.gtkrc-2.0

print_success "Enhanced Thunar/GTK Nord theme installation completed!"

echo
print_status "Installation Summary:"
echo "  âœ“ Enhanced GTK-3.0 CSS with comprehensive theming"
echo "  âœ“ Optimized settings.ini with modern preferences"
echo "  âœ“ GTK-2.0 theme for legacy applications"
echo "  âœ“ Thunar-specific styling improvements"
echo "  âœ“ Created backup of existing configuration"

echo
print_warning "To apply the theme:"
echo "  1. Restart Thunar and other GTK applications"
echo "  2. For immediate effect, run: gsettings reset org.gnome.desktop.interface gtk-theme"
echo "  3. Some applications may require a logout/login"

echo
print_status "Optional improvements:"
echo "  â€¢ Install 'Papirus-Dark' icon theme: sudo pacman -S papirus-icon-theme"
echo "  â€¢ Install 'Inter' font: sudo pacman -S inter-font"
echo "  â€¢ For Qt applications, consider kvantum theme manager"

echo
print_success "Your Thunar and GTK applications now have enhanced Nord theming! ðŸŽ¨"</code>
                    <button class="copy-btn" onclick="copyToClipboard(this)">
                        <i class="fas fa-copy"></i>
                    </button>
                </div>
            </div>
        </section>

        <section id="btop" class="section">
            <h2><i class="fas fa-sparkles"></i> BTOP</h2>
            
            <div class="command-block">
                <h3>BTOP nord theme</h3>
                <div class="code-container">
                    <code>#!/bin/bash
set -e

# Colors for output
RED='\033[0;31m'
GREEN='\033[0;32m'
YELLOW='\033[1;33m'
BLUE='\033[0;34m'
PURPLE='\033[0;35m'
NC='\033[0m'

print_status() {
    echo -e "${BLUE}[INFO]${NC} $1"
}

print_success() {
    echo -e "${GREEN}[SUCCESS]${NC} $1"
}

print_warning() {
    echo -e "${YELLOW}[WARNING]${NC} $1"
}

print_error() {
    echo -e "${RED}[ERROR]${NC} $1"
}

print_header() {
    echo -e "${PURPLE}[BTOP]${NC} $1"
}

# Check if btop is installed
check_btop_installation() {
    if ! command -v btop &> /dev/null; then
        print_error "btop is not installed!"
        echo "Install it with: sudo pacman -S btop"
        exit 1
    fi
    
    local btop_version=$(btop --version 2>/dev/null | head -n1 | grep -oE '[0-9]+\.[0-9]+\.[0-9]+' || echo "unknown")
    print_status "Found btop version: $btop_version"
}

# Backup existing configuration
backup_btop_config() {
    local config_dir="$HOME/.config/btop"
    local backup_dir="$config_dir/backup_$(date +%Y%m%d_%H%M%S)"
    
    if [ -f "$config_dir/btop.conf" ] || [ -d "$config_dir/themes" ]; then
        print_status "Creating backup of existing btop configuration..."
        mkdir -p "$backup_dir"
        
        [ -f "$config_dir/btop.conf" ] && cp "$config_dir/btop.conf" "$backup_dir/"
        [ -d "$config_dir/themes" ] && cp -r "$config_dir/themes" "$backup_dir/"
        
        print_success "Backup created at: $backup_dir"
    fi
}

print_header "Enhanced Btop Nord Theme Installer"
print_status "Setting up comprehensive btop Nord theming..."

# Check installation and create backup
check_btop_installation
backup_btop_config

# Create directories
print_status "Creating btop configuration directories..."
mkdir -p ~/.config/btop/themes && \

# Create enhanced Nord theme
print_status "Installing enhanced Nord theme..."
cat > ~/.config/btop/themes/nord.theme <<'EOF'
# Enhanced Nord Theme for btop
# Based on the Nord color palette with improved visual hierarchy
# Compatible with btop v1.2.13+ 

# === NORD COLOR PALETTE ===
# Polar Night (Dark colors)
# nord0: #2e3440  - darkest background
# nord1: #3b4252  - dark background
# nord2: #434c5e  - medium background  
# nord3: #4c566a  - light background/borders

# Snow Storm (Light colors)
# nord4: #d8dee9  - dark foreground
# nord5: #e5e9f0  - medium foreground
# nord6: #eceff4  - light foreground

# Frost (Blue colors)
# nord7: #8fbcbb  - teal
# nord8: #88c0d0  - light blue
# nord9: #81a1c1  - blue
# nord10: #5e81ac - dark blue

# Aurora (Accent colors)
# nord11: #bf616a - red
# nord12: #d08770 - orange  
# nord13: #ebcb8b - yellow
# nord14: #a3be8c - green
# nord15: #b48ead - purple

# === MAIN INTERFACE ===
theme[main_bg]="#2e3440"
theme[main_fg]="#d8dee9"
theme[title]="#88c0d0"
theme[hi_fg]="#eceff4"

# === SELECTION AND INTERACTION ===
theme[selected_bg]="#5e81ac"
theme[selected_fg]="#eceff4"
theme[inactive_fg]="#4c566a"
theme[proc_start]="#88c0d0"
theme[proc_mid]="#81a1c1"
theme[proc_end]="#5e81ac"

# === BOX STYLING ===
# Different colors for each major component box
theme[cpu_box]="#81a1c1"        # Blue for CPU
theme[mem_box]="#a3be8c"        # Green for Memory
theme[net_box]="#ebcb8b"        # Yellow for Network
theme[proc_box]="#b48ead"       # Purple for Processes
theme[div_line]="#4c566a"       # Subtle divider lines

# === GRAPH AND METER STYLING ===
theme[graph_text]="#d8dee9"
theme[meter_bg]="#3b4252"

# === CPU USAGE COLORS ===
# Warm gradient for CPU usage (low to high)
theme[cpu_start]="#a3be8c"      # Green (low usage)
theme[cpu_mid]="#ebcb8b"        # Yellow (medium usage)  
theme[cpu_end]="#bf616a"        # Red (high usage)

# Alternative CPU colors for different cores
theme[used_start]="#a3be8c"
theme[used_mid]="#d08770"
theme[used_end]="#bf616a"

# === MEMORY COLORS ===
# Cool gradient for memory usage
theme[mem_start]="#88c0d0"      # Light blue (low)
theme[mem_mid]="#81a1c1"        # Blue (medium)
theme[mem_end]="#5e81ac"        # Dark blue (high)

# Available memory (inverse of used)
theme[available_start]="#a3be8c"
theme[available_mid]="#8fbcbb"
theme[available_end]="#88c0d0"

# Cached memory
theme[cached_start]="#b48ead"
theme[cached_mid]="#81a1c1"
theme[cached_end]="#5e81ac"

# === PROCESS COLORS ===
# Process activity indicators
theme[process_start]="#88c0d0"
theme[process_mid]="#81a1c1"
theme[process_end]="#5e81ac"

# === TEMPERATURE COLORS ===
# Temperature gradient (cool to hot)
theme[temp_start]="#88c0d0"     # Cool blue
theme[temp_mid]="#ebcb8b"       # Warm yellow
theme[temp_end]="#bf616a"       # Hot red

# === NETWORK COLORS ===
# Download activity (green theme)
theme[download_start]="#a3be8c"
theme[download_mid]="#8fbcbb"
theme[download_end]="#88c0d0"

# Upload activity (purple theme)  
theme[upload_start]="#b48ead"
theme[upload_mid]="#81a1c1"
theme[upload_end]="#5e81ac"

# === DISK I/O COLORS ===
# Read operations (teal theme)
theme[read_start]="#8fbcbb"
theme[read_mid]="#88c0d0"
theme[read_end]="#81a1c1"

# Write operations (orange theme)
theme[write_start]="#d08770"
theme[write_mid]="#ebcb8b"
theme[write_end]="#bf616a"

# === BATTERY COLORS ===
# Battery level indicator
theme[battery_start]="#bf616a"  # Low battery (red)
theme[battery_mid]="#ebcb8b"    # Medium battery (yellow)
theme[battery_end]="#a3be8c"    # Full battery (green)

# === ADDITIONAL INTERFACE ELEMENTS ===
theme[misc]="#8fbcbb"           # Miscellaneous elements
theme[proc_misc]="#8fbcbb"      # Process miscellaneous info
theme[item_bg]="#3b4252"        # Background for items
theme[item_fg]="#d8dee9"        # Foreground for items

# === GRAPH SPECIFIC OVERRIDES ===
# These provide fine-tuned control for specific graph types
theme[cpu_graph_lower]="#a3be8c"
theme[cpu_graph_mid]="#ebcb8b"  
theme[cpu_graph_upper]="#bf616a"

theme[mem_graph_lower]="#88c0d0"
theme[mem_graph_mid]="#81a1c1"
theme[mem_graph_upper]="#5e81ac"

theme[net_graph_lower]="#8fbcbb"
theme[net_graph_mid]="#88c0d0"
theme[net_graph_upper]="#81a1c1"
EOF

# Create optimized btop configuration
print_status "Installing optimized btop configuration..."
cat > ~/.config/btop/btop.conf <<'EOF'
#? Enhanced btop configuration with Nord theme
#? Optimized for performance and aesthetics

# === THEME SETTINGS ===
color_theme = "nord"
theme_background = True
truecolor = True
force_tty = False

# === LAYOUT PRESETS ===
# Preset configurations for different use cases
# Format: "box_name:P:G" where P=position(0/1), G=graph_symbol
presets = "cpu:1:default,proc:0:default cpu:0:default,mem:0:default,net:0:default cpu:0:braille,mem:0:braille,net:0:braille,proc:1:default"

# === INTERFACE SETTINGS ===
vim_keys = True
rounded_corners = True
graph_symbol = "braille"

# Box-specific graph symbols for optimal display
graph_symbol_cpu = "braille"
graph_symbol_mem = "braille" 
graph_symbol_net = "braille"
graph_symbol_proc = "default"

# === DISPLAY CONFIGURATION ===
shown_boxes = "cpu mem net proc"
update_ms = 1500

# === PROCESS SETTINGS ===
proc_sorting = "cpu lazy"
proc_reversed = False
proc_tree = False
proc_colors = True
proc_gradient = True
proc_per_core = False
proc_mem_bytes = True
proc_info_smaps = False
proc_left = False

# === CPU SETTINGS ===
check_temp = True
cpu_sensor = "Auto"
show_coretemp = True
cpu_temp_custom = ""
temp_scale = "celsius"
show_cpu_freq = True
cpu_single_graph = False
cpu_bottom = False

# === MEMORY SETTINGS ===
mem_graphs = True
mem_below_net = False
zfs_arc_cached = True
show_swap = True
swap_disk = False
show_disks = True
only_physical = True
use_fstab = False
zfs_hide_datasets = False
disk_free_priv = False

# === DISK I/O SETTINGS ===
show_io_stat = True
io_mode = False
io_graph_combined = False
io_graph_speeds = ""

# === NETWORK SETTINGS ===
net_download = 0
net_upload = 0
net_auto = True
net_sync = False
net_iface = ""
net_color_fixed = False

# === BATTERY SETTINGS ===
show_battery = True
selected_battery = "Auto"

# === GENERAL SETTINGS ===
base_10_sizes = False
clock_format = "%H:%M:%S"
background_update = True
custom_cpu_name = ""
disks_filter = ""

# === LOGGING ===
log_level = "WARNING"

# === ADVANCED SETTINGS ===
# Enable UTF-8 support for better graph rendering
utf_force = False

# Update check (disable for privacy)
update_check = False

# Custom key bindings (vim-style navigation enabled above)
# h,j,k,l for navigation when vim_keys = True
# +/- for zoom, space for pause, q for quit

# === PERFORMANCE TUNING ===
# Reduce update frequency for better performance on slower systems
# update_ms = 2000  # Uncomment for slower systems

# Disable expensive operations on resource-constrained systems  
# show_coretemp = False      # Disable if temperature sensors cause lag
# proc_gradient = False      # Disable gradient for better performance
# graph_symbol = "block"     # Use simpler symbols on older terminals
EOF

# Create additional theme variants
print_status "Creating additional Nord theme variants..."

# Nord Minimal - for low-resource systems
cat > ~/.config/btop/themes/nord-minimal.theme <<'EOF'
# Nord Minimal Theme - Optimized for performance
# Simplified color scheme with reduced visual effects

theme[main_bg]="#2e3440"
theme[main_fg]="#d8dee9"
theme[title]="#88c0d0"
theme[hi_fg]="#eceff4"
theme[selected_bg]="#5e81ac"
theme[selected_fg]="#eceff4"
theme[inactive_fg]="#4c566a"

# Simplified box colors
theme[cpu_box]="#81a1c1"
theme[mem_box]="#a3be8c"
theme[net_box]="#ebcb8b"
theme[proc_box]="#b48ead"
theme[div_line]="#4c566a"

# Basic graph colors
theme[graph_text]="#d8dee9"
theme[meter_bg]="#3b4252"
theme[used_start]="#88c0d0"
theme[used_mid]="#81a1c1"
theme[used_end]="#5e81ac"

# Simplified gradients
theme[available_start]="#a3be8c"
theme[available_end]="#88c0d0"
theme[cached_start]="#b48ead"
theme[cached_end]="#5e81ac"
theme[process_start]="#88c0d0"
theme[process_end]="#5e81ac"
theme[temp_start]="#88c0d0"
theme[temp_end]="#bf616a"
theme[download_start]="#a3be8c"
theme[download_end]="#88c0d0"
theme[upload_start]="#b48ead"
theme[upload_end]="#5e81ac"
EOF

# Nord High Contrast - for better visibility
cat > ~/.config/btop/themes/nord-contrast.theme <<'EOF'
# Nord High Contrast Theme - Enhanced visibility
# Increased contrast for better readability

theme[main_bg]="#242933"
theme[main_fg]="#eceff4"
theme[title]="#8fbcbb"
theme[hi_fg]="#ffffff"
theme[selected_bg]="#4c566a"
theme[selected_fg]="#eceff4"
theme[inactive_fg]="#434c5e"

# High contrast box colors
theme[cpu_box]="#7aa6da"
theme[mem_box]="#b9ca4a"
theme[net_box]="#e7c547"
theme[proc_box]="#c397d8"
theme[div_line]="#5e6687"

# High contrast graph elements
theme[graph_text]="#eceff4"
theme[meter_bg]="#2f3541"
theme[used_start]="#bf616a"
theme[used_mid]="#d08770"
theme[used_end]="#ebcb8b"

theme[available_start]="#a3be8c"
theme[available_mid]="#8fbcbb"
theme[available_end]="#88c0d0"

theme[cached_start]="#b48ead"
theme[cached_mid]="#81a1c1"
theme[cached_end]="#5e81ac"

theme[process_start]="#88c0d0"
theme[process_mid]="#81a1c1"
theme[process_end]="#5e81ac"

theme[temp_start]="#88c0d0"
theme[temp_mid]="#ebcb8b"
theme[temp_end]="#bf616a"

theme[download_start]="#a3be8c"
theme[download_mid]="#8fbcbb"
theme[download_end]="#88c0d0"

theme[upload_start]="#b48ead"
theme[upload_mid]="#81a1c1"
theme[upload_end]="#5e81ac"
EOF

# Create startup script for theme management
print_status "Creating theme management utilities..."
cat > ~/.config/btop/switch-theme.sh <<'EOF'
#!/bin/bash
# btop Nord Theme Switcher

THEMES_DIR="$HOME/.config/btop/themes"
CONFIG_FILE="$HOME/.config/btop/btop.conf"

echo "Available Nord themes:"
echo "1. nord (default)"
echo "2. nord-minimal (performance)"  
echo "3. nord-contrast (high visibility)"

read -p "Select theme (1-3): " choice

case $choice in
    1) THEME="nord" ;;
    2) THEME="nord-minimal" ;;
    3) THEME="nord-contrast" ;;
    *) echo "Invalid choice"; exit 1 ;;
esac

if [ -f "$THEMES_DIR/$THEME.theme" ]; then
    sed -i "s/color_theme = .*/color_theme = \"$THEME\"/" "$CONFIG_FILE"
    echo "Theme switched to: $THEME"
    echo "Restart btop to see changes"
else
    echo "Theme file not found: $THEME.theme"
fi
EOF

chmod +x ~/.config/btop/switch-theme.sh

# Set proper permissions
chmod 644 ~/.config/btop/btop.conf
chmod 644 ~/.config/btop/themes/*.theme

print_success "Enhanced btop Nord theme installation completed!"

echo
print_status "Installation Summary:"
echo "  âœ“ Enhanced nord.theme with comprehensive color mapping"
echo "  âœ“ Optimized btop.conf with performance tuning"
echo "  âœ“ Additional theme variants (minimal, high-contrast)"
echo "  âœ“ Theme switcher utility"
echo "  âœ“ Vim-style navigation enabled"
echo "  âœ“ Braille graphs for higher resolution"

echo
print_warning "Theme Features:"
echo "  â€¢ Full Nord color palette implementation"
echo "  â€¢ Optimized for readability and performance"
echo "  â€¢ Multiple variants for different use cases"
echo "  â€¢ Enhanced visual hierarchy"

echo
print_status "Usage Instructions:"
echo "  1. Launch btop - Nord theme should load automatically"
echo "  2. Press 'ESC' â†’ 'Options' â†’ 'Color theme' to change themes"
echo "  3. Use ~/.config/btop/switch-theme.sh to switch variants"
echo "  4. Vim keys enabled: h/j/k/l for navigation"

echo
print_status "Performance Tips:"
echo "  â€¢ Use 'nord-minimal' on slower systems"
echo "  â€¢ Increase update_ms if system feels sluggish"
echo "  â€¢ Disable temperature monitoring if it causes lag"

echo
print_success "Your btop now features comprehensive Nord theming! ðŸ“Š"</code>
                    <button class="copy-btn" onclick="copyToClipboard(this)">
                        <i class="fas fa-copy"></i>
                    </button>
                </div>
            </div>
        </section>

        <section id="rice-setup" class="section">
            <h2><i class="fas fa-sparkles"></i> Rice Setup Complete</h2>
            
            <div class="command-block">
                <h3>Apply All Rice Configurations</h3>
                <div class="code-container">
                    <code># Reload i3 configuration
i3-msg reload && \

# Restart i3 to apply all changes  
i3-msg restart && \

# Start/restart all services
killall picom dunst 2>/dev/null || true && \
sleep 1 && \
picom --config ~/.config/picom/picom.conf &
dunst &

# Set a random wallpaper
~/.config/scripts/wallpaper.sh &

# Show completion message
notify-send "ðŸŽ¨ Rice Setup Complete" "Your minimalist i3 desktop is now configured!\n\nFeatures:\nâ€¢ Enhanced i3status with system info\nâ€¢ Styled dmenu with power menu\nâ€¢ Subtle transparency with picom\nâ€¢ Beautiful terminal colors\nâ€¢ Notification system" && \

echo "ðŸŽ¨ Rice configuration complete! Your setup now includes:"
echo "   â€¢ Enhanced i3status with battery info, CPU/RAM usage at TOP"
echo "   â€¢ Beautiful dmenu styling with working power management menu"
echo "   â€¢ Subtle transparency effects with picom"
echo "   â€¢ Dracula-inspired color scheme throughout"
echo "   â€¢ Enhanced notifications with dunst"
echo "   â€¢ Clean aesthetics without intrusive window rules"
echo ""
echo "ðŸ’¡ New keybindings added:"
echo "   â€¢ $mod+Shift+p = Power menu (shutdown, restart, etc.)"
echo ""
echo "ðŸ”§ All configurations are in ~/.config/ and can be easily modified!"</code>
                    <button class="copy-btn" onclick="copyToClipboard(this)">
                        <i class="fas fa-copy"></i>
                    </button>
                </div>
            </div>
        </section>

        <section id="final-steps" class="section">
            <h2><i class="fas fa-flag-checkered"></i> Final System Reboot</h2>
            
            <div class="command-block">
                <h3>Reboot System</h3>
                <div class="code-container">
                    <code>sudo reboot</code>
                    <button class="copy-btn" onclick="copyToClipboard(this)">
                        <i class="fas fa-copy"></i>
                    </button>
                </div>
            </div>
        </section>

        <section id="network-management" class="section">
            <h2><i class="fas fa-wifi"></i> Network Management</h2>
            
            <div class="command-block">
                <h3>USB Ethernet Adapter Setup</h3>
                <div class="code-container">
                    <code># Check USB devices and network interfaces
lsusb && ip link show

# Check for USB ethernet adapter in system logs
sudo dmesg | grep -i -E "(ax88179|usb|eth|enp3s0f3u1u1c2|cdc_ncm)" | tail -20

# Load USB ethernet driver and restart networking
sudo modprobe cdc_ncm && sudo systemctl restart NetworkManager

# Test internet connectivity
ping -c 3 google.com

# Make USB ethernet driver persistent
echo "cdc_ncm" | sudo tee /etc/modules-load.d/ethernet.conf</code>
                    <button class="copy-btn" onclick="copyToClipboard(this)">
                        <i class="fas fa-copy"></i>
                    </button>
                </div>
            </div>

            <div class="command-block">
                <h3>WiFi Management Commands</h3>
                <div class="code-container">
                    <code># List available networks
nmcli device wifi list

# Connect to network
nmcli device wifi connect "NETWORK_NAME" password "PASSWORD"

# Connect to hidden network
nmcli device wifi connect "NETWORK_NAME" password "PASSWORD" hidden yes

# Disconnect
nmcli device disconnect wlan0

# Reconnect to saved network
nmcli connection up "NETWORK_NAME"

# Show saved connections
nmcli connection show

# Delete saved connection
nmcli connection delete "NETWORK_NAME"

# Show device status
nmcli device status

# Turn WiFi off/on
nmcli radio wifi off
nmcli radio wifi on

# Restart NetworkManager
sudo systemctl restart NetworkManager

# Check NetworkManager logs
journalctl -u NetworkManager --since "10 minutes ago"

# Show WiFi interface info
ip addr show wlan0

# Show currently connected network
nmcli device wifi list | grep '*'</code>
                    <button class="copy-btn" onclick="copyToClipboard(this)">
                        <i class="fas fa-copy"></i>
                    </button>
                </div>
            </div>
        </section>

        <section id="bluetooth" class="section">
            <h2><i class="fas fa-bluetooth-b"></i> Bluetooth Management</h2>
            
            <div class="command-block">
                <h3>Bluetooth Setup and Management</h3>
                <div class="code-container">
                    <code># Enable and start Bluetooth service
sudo systemctl enable bluetooth && sudo systemctl start bluetooth

# Check Bluetooth status
systemctl status bluetooth

# List Bluetooth controllers
bluetoothctl list

# Enter Bluetooth control interface
bluetoothctl

# Inside bluetoothctl:
power on
agent on
default-agent
scan on

# Stop scanning
scan off

# Pair with device
pair XX:XX:XX:XX:XX:XX

# Connect to device
connect XX:XX:XX:XX:XX:XX

# Trust device
trust XX:XX:XX:XX:XX:XX

# List paired devices
devices

# Exit bluetoothctl
exit

# Disconnect device
bluetoothctl disconnect XX:XX:XX:XX:XX:XX

# Remove device
bluetoothctl remove XX:XX:XX:XX:XX:XX

# Check if Bluetooth is blocked
rfkill list

# Unblock Bluetooth
sudo rfkill unblock bluetooth

# Restart Bluetooth service
sudo systemctl restart bluetooth

# Check Bluetooth logs
journalctl -u bluetooth --since "10 minutes ago"</code>
                    <button class="copy-btn" onclick="copyToClipboard(this)">
                        <i class="fas fa-copy"></i>
                    </button>
                </div>
            </div>
        </section>

        <section id="glossary" class="section">
            <h2><i class="fas fa-book"></i> System Information & Reference Glossary</h2>
            
            <div class="glossary-grid">
                <div class="glossary-item">
                    <h3><i class="fas fa-keyboard"></i> Keyboard Shortcuts (i3 Window Manager)</h3>
                    <div class="glossary-content">
                        <ul>
                            <li>$mod = Super/Windows key</li>
                            <li>$mod + Enter = Open terminal (Alacritty)</li>
                            <li>$mod + d = Application launcher (rofi)</li>
                            <li>$mod + Shift + q = Kill focused window</li>
                            <li>$mod + Shift + c = Reload i3 config</li>
                            <li>$mod + Shift + r = Restart i3</li>
                            <li>$mod + Shift + e = Exit i3</li>
                            <li>$mod + f = Toggle fullscreen</li>
                            <li>$mod + s = Stacking layout</li>
                            <li>$mod + w = Tabbed layout</li>
                            <li>$mod + e = Split layout</li>
                            <li>$mod + h = Split horizontal</li>
                            <li>$mod + v = Split vertical</li>
                            <li>$mod + 1-10 = Switch to workspace</li>
                            <li>$mod + Shift + 1-10 = Move container to workspace</li>
                            <li>$mod + Shift + Space = Toggle floating</li>
                            <li>$mod + Space = Toggle focus floating/tiled</li>
                        </ul>
                    </div>
                </div>

                <div class="glossary-item">
                    <h3><i class="fas fa-plus"></i> Custom Shortcuts Added</h3>
                    <div class="glossary-content">
                        <ul>
                            <li>$mod + b = Firefox browser</li>
                            <li>$mod + t = Thunar file manager</li>
                            <li>$mod + m = Spotify music</li>
                            <li>$mod + n = Neovim in workspace 5</li>
                            <li>$mod + p = System monitor (btop)</li>
                            <li>$mod + x = Lock screen (i3lock)</li>
                            <li>$mod + Tab = Next workspace</li>
                            <li>$mod + Shift + Tab = Previous workspace</li>
                            <li>$mod + Shift + w = Random wallpaper</li>
                            <li>$mod + Shift + p = Power menu</li>
                            <li>Print Screen = Full screenshot to clipboard</li>
                            <li>Shift + Print Screen = Selection screenshot to clipboard</li>
                            <li>Brightness Up/Down = Adjust screen brightness with notification</li>
                        </ul>
                    </div>
                </div>

                <div class="glossary-item">
                    <h3><i class="fas fa-battery-half"></i> Battery Management</h3>
                    <div class="glossary-content">
                        <h4>Check Battery Information</h4>
                        <div class="code-container">
                            <code># Battery status and health
acpi -b && acpi -i

# Battery manufacturer and model (for replacement)
sudo dmidecode -s system-manufacturer
sudo dmidecode -s system-product-name
sudo dmidecode -t 22

# Power consumption
sudo powertop

# TLP battery status
sudo tlp-stat -b</code>
                            <button class="copy-btn" onclick="copyToClipboard(this)">
                                <i class="fas fa-copy"></i>
                            </button>
                        </div>
                    </div>
                </div>

                <div class="glossary-item">
                    <h3><i class="fas fa-laptop"></i> HP EliteBook 845 G8 Battery Specifications</h3>
                    <div class="glossary-content">
                        <ul>
                            <li><strong>Battery Type:</strong> Lithium-ion (Li-ion)</li>
                            <li><strong>Original Capacity:</strong> Typically 51Wh or 45Wh</li>
                            <li><strong>Voltage:</strong> 11.55V</li>
                            <li><strong>Part Numbers:</strong> Common HP part numbers include HS03, HS04, or HP Long Life</li>
                            <li><strong>Replacement:</strong> Use genuine HP batteries or certified compatible ones</li>
                        </ul>
                        
                        <h4>Battery Longevity Tips</h4>
                        <ul>
                            <li><strong>Optimal Charge Range:</strong> Keep between 20-80% for daily use</li>
                            <li><strong>Storage:</strong> If storing laptop, keep battery at 50-60%</li>
                            <li><strong>Temperature:</strong> Avoid extreme temperatures (keep 15-35Â°C)</li>
                            <li><strong>Deep Discharge:</strong> Occasionally (monthly) discharge to 5% then full charge</li>
                            <li><strong>Power Management:</strong> Use TLP for automatic battery optimization</li>
                        </ul>
                    </div>
                </div>

                <div class="glossary-item">
                    <h3><i class="fas fa-terminal"></i> System Performance Commands</h3>
                    <div class="glossary-content">
                        <h4>Custom Scripts Created</h4>
                        <ul>
                            <li><code>update</code> - Update system and AUR packages</li>
                            <li><code>debloat</code> - Clean system cache and temporary files</li>
                            <li><code>performance</code> - Enable performance mode</li>
                            <li><code>powersave</code> - Enable power saving mode</li>
                            <li><code>boost</code> - Temporary performance boost</li>
                            <li><code>boottime</code> - Analyze boot time and slow services</li>
                        </ul>
                    </div>
                </div>

                <div class="glossary-item">
                    <h3><i class="fas fa-chart-line"></i> System Monitoring</h3>
                    <div class="glossary-content">
                        <div class="code-container">
                            <code># CPU temperature and sensors
sensors

# System resources
btop

# Disk usage
df -h

# Memory usage
free -h

# GPU information (AMD)
lspci | grep VGA

# Process monitoring
ps aux
pstree</code>
                            <button class="copy-btn" onclick="copyToClipboard(this)">
                                <i class="fas fa-copy"></i>
                            </button>
                        </div>
                    </div>
                </div>

                <div class="glossary-item">
                    <h3><i class="fas fa-microchip"></i> Hardware Specifications (HP EliteBook 845 G8)</h3>
                    <div class="glossary-content">
                        <h4>CPU</h4>
                        <ul>
                            <li><strong>Model:</strong> AMD Ryzen 5 PRO 5650U</li>
                            <li><strong>Architecture:</strong> Zen 3 (7nm)</li>
                            <li><strong>Cores:</strong> 6 cores / 12 threads</li>
                            <li><strong>Base Clock:</strong> 2.3 GHz</li>
                            <li><strong>Boost Clock:</strong> Up to 4.2 GHz</li>
                            <li><strong>Cache:</strong> 16 MB L3</li>
                            <li><strong>TDP:</strong> 15W (configurable to 25W)</li>
                        </ul>

                        <h4>Memory</h4>
                        <ul>
                            <li><strong>RAM:</strong> 16 GB DDR4-3200 SDRAM</li>
                            <li><strong>Type:</strong> SO-DIMM</li>
                            <li><strong>Upgradeable:</strong> Check if dual-channel or single slot</li>
                        </ul>

                        <h4>Storage</h4>
                        <ul>
                            <li><strong>Primary:</strong> 512 GB PCIe NVMe SSD</li>
                            <li><strong>Interface:</strong> M.2 2280</li>
                            <li><strong>Type:</strong> Typically TLC NAND</li>
                            <li><strong>Device:</strong> /dev/nvme0n1</li>
                        </ul>

                        <h4>Graphics</h4>
                        <ul>
                            <li><strong>iGPU:</strong> AMD Radeon Graphics (Integrated)</li>
                            <li><strong>Architecture:</strong> Vega 7</li>
                            <li><strong>Driver:</strong> AMDGPU (open-source)</li>
                        </ul>
                    </div>
                </div>

                <div class="glossary-item">
                    <h3><i class="fas fa-folder-tree"></i> File System Structure</h3>
                    <div class="glossary-content">
                        <ul>
                            <li>/dev/nvme0n1p1 â†’ /boot/efi (FAT32, EFI System Partition)</li>
                            <li>/dev/nvme0n1p2 â†’ [SWAP] (Linux swap)</li>
                            <li>/dev/nvme0n1p3 â†’ / (ext4, Root partition)</li>
                        </ul>
                    </div>
                </div>

                <div class="glossary-item">
                    <h3><i class="fas fa-network-wired"></i> System Components</h3>
                    <div class="glossary-content">
                        <h4>Network Interfaces</h4>
                        <ul>
                            <li><strong>WiFi:</strong> wlan0</li>
                            <li><strong>Ethernet:</strong> (via USB adapter) typically enp*</li>
                            <li><strong>Bluetooth:</strong> Available with bluez</li>
                        </ul>

                        <h4>Audio System</h4>
                        <ul>
                            <li><strong>Framework:</strong> PipeWire</li>
                            <li><strong>Services:</strong> pipewire, pipewire-pulse, wireplumber</li>
                            <li><strong>Controls:</strong> alsamixer, pavucontrol (if installed)</li>
                        </ul>

                        <h4>Power Management</h4>
                        <ul>
                            <li><strong>TLP:</strong> Battery optimization daemon</li>
                            <li><strong>AMD P-State:</strong> Active (processor.max_cstate=1 amd_pstate=active)</li>
                            <li><strong>CPU Governor:</strong> Performance (set by cpu-performance.service)</li>
                            <li><strong>Brightness Control:</strong> brightnessctl</li>
                        </ul>

                        <h4>Security</h4>
                        <ul>
                            <li><strong>Firewall:</strong> UFW (Uncomplicated Firewall)</li>
                            <li><strong>Default Policy:</strong> Deny incoming, allow outgoing</li>
                            <li><strong>User Groups:</strong> sid user added to: audio,video,input,storage,power,rfkill,sys,adm,disk</li>
                        </ul>

                        <h4>Font Configuration</h4>
                        <ul>
                            <li><strong>Terminal Font:</strong> JetBrains Mono Nerd Font 12pt</li>
                            <li><strong>System Fonts:</strong> Noto Fonts (with emoji and CJK support)</li>
                        </ul>
                    </div>
                </div>

                <div class="glossary-item">
                    <h3><i class="fas fa-tools"></i> Troubleshooting Commands</h3>
                    <div class="glossary-content">
                        <div class="code-container">
                            <code># Check system logs
journalctl -p 3 -xb

# Hardware detection
sudo lshw -short

# PCI devices
lspci -v

# USB devices
lsusb -v

# Module information
lsmod
modinfo <module_name>

# Service status
systemctl status <service_name>

# Network debugging
ip addr
ip route
ping -c 3 8.8.8.8</code>
                            <button class="copy-btn" onclick="copyToClipboard(this)">
                                <i class="fas fa-copy"></i>
                            </button>
                        </div>
                    </div>
                </div>

                <div class="glossary-item">
                    <h3><i class="fas fa-save"></i> Backup Important Files</h3>
                    <div class="glossary-content">
                        <h4>Configuration Files to Backup</h4>
                        <ul>
                            <li>~/.config/i3/config</li>
                            <li>~/.config/alacritty/alacritty.toml</li>
                            <li>~/.xinitrc</li>
                            <li>~/.bashrc or ~/.zshrc</li>
                            <li>~/.config/scripts/</li>
                            <li>/etc/fstab</li>
                            <li>/etc/hosts</li>
                            <li>Custom scripts in /usr/local/bin/</li>
                        </ul>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <footer>
        <div class="container">
            <p>&copy; 2024 Arch Linux Installation Guide. Complete installation and rice configuration.</p>
        </div>
    </footer>

    <script src="script.js"></script>
</body>
</html>
